"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[349],{55375:function(e,t,n){n.d(t,{t5:function(){return v},Oh:function(){return h},zi:function(){return m},EU:function(){return y},aP:function(){return g},Sd:function(){return f}});var o=n(59312);var r=n(82030);var i=n(87950);var a=n(48814);var s=n(24316);var c=n(38763);var d=n(64564);const l=(0,r.default)("CHAINS");const u=(0,i.F)(l);function p(e,{chains:{chainList:t}}){return t.find(t=>t.name===e)}const v=(e,t={})=>(n,o)=>{if(p(e,o()))throw new Error(`Chain ${e} has already started`);return n({type:c.E$,meta:{name:e,ops:Object.assign(Object.assign({},t),(0,a.x)())}})};const h=(e,t={})=>(n,o)=>{if(!p(e,o()))throw new Error(`Chain ${e} has not been started yet`);return n({type:c.xv,meta:{name:e,ops:t}})};const m=(e,t={})=>(n,o)=>(e.forEach(e=>{if(!p(e,o()))throw new Error(`Chain ${e} has not been started yet`)}),n({type:c.Ql,meta:{names:e,ops:t}}));const y=e=>(t,n)=>{if(!p(e,n()))throw new Error(`Chain ${e} has not been started yet`);return t({type:c.iP,meta:{name:e}})};function g(e,t){return(n,{onError:r,onSuccess:i,onComplete:a}={})=>s=>(0,o.mG)(this,void 0,void 0,function*(){s(v(e,{[d.G.thunkChain]:!0}));try{yield s(t(n)),null==i||i()}catch(e){(null==e?void 0:e.chainWasInterrupted)||null==r||r()}null==a||a(),s(y(e))})}const f=u("CANCEL_TOUR",({chain:e,cookieKey:t,cookieValue:n},o)=>{s.Q.set(t,n),o(h(e,{processAction:!0}))})},24113:function(e,t,n){n.d(t,{j:function(){return k},Z:function(){return O}});var o=n(47815);var r=n(87323);var i=n(55375);var a=n(24316);var s=n(62189);var c=n(82726);var d=n(6573);var l=n(75494);var u=n(66970);var p=n(41077);var v=n(22559);const h=(0,s.iN)(d.zGK.brandKitTourPart1);const m=(0,s.iN)(d.zGK.brandKitTourPart2);const y=(0,i.Sd)({chain:d.zGK.brandKitTourPart1,cookieKey:l.E9.brandKitTourViewed,cookieValue:"5"});const g=(0,i.Oh)(d.zGK.brandKitTourPart1,{processAction:!0});const f=(0,i.Oh)(d.zGK.brandKitTourPart2,{processAction:!0});const b=(0,s.$S)("brandKitTour");const P=3;const w=16;const j=18;const T=16;const C=352;const x=67;const S=387;const G=64;const k=e=>!e&&Number(a.Q.get(l.E9.brandKitTourViewed))<3;const O={steps:[{tooltipKey:d.rgO.brandKitTourTip1,options:{title:"brandkit_tour_title_1",description:"brandkit_tour_text_1",buttonType:c.L.next,currentStep:1,totalSteps:5,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,s.au)(t);return{left:n+r+w,top:o-j}},gtmOptions:b(1,"buttonNext"),pinClassName:v.Z.leftTop},onNextActions:[h(1)],onCancelActions:[y]},{tooltipKey:d.rgO.brandKitTourTip2,options:{title:"brandkit_tour_title_2",description:"brandkit_tour_text_2",buttonType:c.L.next,currentStep:2,totalSteps:5,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,s.au)(t);return{left:n+r+w,top:o-j}},gtmOptions:b(2,"buttonNext"),pinClassName:v.Z.leftTop},onNextActions:[h(2)],onCancelActions:[y]},{tooltipKey:d.rgO.brandKitTourTip3,options:{title:"brandkit_tour_title_3",description:"brandkit_tour_text_3",buttonType:c.L.next,currentStep:3,totalSteps:5,overridePosition:(e,t)=>{const{left:n,top:o,height:r}=(0,s.au)(t);return{left:n,top:o+r+T}},gtmOptions:b(3,"buttonNext"),pinClassName:v.Z.topLeft},onNextActions:[h(3)],onCancelActions:[y]},{tooltipKey:d.rgO.brandKitTourTip4,options:{title:"brandkit_tour_title_4",description:"brandkit_tour_text_4",buttonType:c.L.createDesign,className:p.Z.tooltipWithOverlay,currentStep:4,totalSteps:5,gtmOptions:b(4,"buttonCreateDesign")},onNextActions:[(0,o.DF)(d.eeA.quickNewDesign,{sidebar:d.GjI.brandKit,shouldCloseOnOverlayClick:!1}),g],onCancelActions:[y]},{tooltipKey:d.rgO.brandKitTourTip5,options:{title:"brandkit_tour_title_5",description:"brandkit_tour_text_5",buttonType:c.L.finish,currentStep:5,totalSteps:5,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,s.au)(t);return{left:n+r+C,top:o+x}},gtmOptions:b(5,"buttonGotIt"),pinClassName:v.Z.leftTop},onShowActions:[(0,s.Ie)(d.GjI.brandKit)],onNextActions:[m(5)],onCancelActions:[m(5)]},{tooltipKey:d.rgO.tutorialsTourTip,options:{title:"tutorial_tooltip_title",description:"tutorial_tooltip_body",buttonType:c.L.finish,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,s.au)(t);return{left:n+r-S,top:o+G}},gtmOptions:b(6,"buttonGotIt"),pinClassName:v.Z.topRight},onShowActions:[(0,r.ci)()],onNextActions:[f],onCancelActions:[f]}],shouldProcessCheck:e=>{const{auth:{currentUser:t},common:{currentPage:n},sidebar:{isSidebarOpened:o},partner:{currentPartner:r}}=e.getState();const i=new URLSearchParams(window.location.search).get("sidebar");return!(Number(a.Q.get(l.E9.brandKitTourViewed))+1===O.steps.length-1&&!t.id)&&(Number(a.Q.get(O.cookieKey))<O.steps.length-1&&(u.s.artBoard===n&&i===d.GjI.brandKit&&o&&Number(a.Q.get(O.cookieKey))>=3||u.s.brandKit===n&&k(r))&&!Boolean(r))},cookieKey:l.E9.brandKitTourViewed}},41710:function(e,t,n){n.d(t,{H:function(){return r}});var o=n(66970);const r=new Map([[o.s.landing,"/"],[o.s.team,"/team/settings/"],[o.s.subscription,"/user/settings/subscription/"]])},31575:function(e,t,n){n.d(t,{a:function(){return O},Q:function(){return k}});var o=n(6573);var r=n(82726);var i=n(51042);var a=n(87323);var s=n(55375);var c=n(24316);var d=n(62189);var l=n(75494);var u=n(66970);var p=n(22559);const v=(0,d.iN)(o.zGK.artBoardTour);const h=v(6);const m=(0,s.Oh)(o.zGK.artBoardTour,{processAction:!0});const y=(0,d.$S)("editorTourTips");const g=352;const f=246;const b=130;const P=242;const w=198;const j=378;const T=24;const C=387;const x=64;const S={steps:[{tooltipKey:o.rgO.artboardTourTip1,options:{title:"tour_title_1",description:"tour_text_1",buttonType:r.L.next,currentStep:1,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r+g,top:o+f}},gtmOptions:y(1,"buttonNext"),pinClassName:p.Z.leftTop},onShowActions:[(0,d.Ie)(o.GjI.designs)],onNextActions:[v(1)],onCancelActions:[h]},{tooltipKey:o.rgO.artboardTourTip2,options:{title:"tour_title_2",description:"tour_text_2",buttonType:r.L.next,currentStep:2,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r+g,top:o+f}},gtmOptions:y(2,"buttonNext"),pinClassName:p.Z.leftTop},onShowActions:[(0,d.Ie)(o.GjI.photos)],onNextActions:[v(2)],onCancelActions:[h]},{tooltipKey:o.rgO.artboardTourTip3,options:{title:"tour_title_3",description:"tour_text_3",buttonType:r.L.next,currentStep:3,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r+g,top:o+b}},gtmOptions:y(3,"buttonNext"),pinClassName:p.Z.leftTop},onShowActions:[(0,d.Ie)(o.GjI.library)],onNextActions:[v(3)],onCancelActions:[h]},{tooltipKey:o.rgO.artboardTourTip4,options:{title:"tour_title_4",description:"tour_text_4",buttonType:r.L.next,currentStep:4,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r+g,top:o+P}},gtmOptions:y(4,"buttonNext"),pinClassName:p.Z.leftTop},onShowActions:[(0,d.Ie)(o.GjI.animation)],onNextActions:[v(4)],onCancelActions:[h]},{tooltipKey:o.rgO.artboardTourTip5,options:{title:"tour_title_5",description:"tour_text_5",buttonType:r.L.next,currentStep:5,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r+g,top:o+w}},gtmOptions:y(5,"buttonNext"),pinClassName:p.Z.leftTop},onShowActions:[(0,d.Ie)(o.GjI.music)],onNextActions:[v(5)],onCancelActions:[h]},{tooltipKey:o.rgO.artboardTourTip6,options:{title:"tour_title_6",description:"tour_text_6",buttonType:r.L.finish,currentStep:6,totalSteps:6,overridePosition:(e,t)=>{const{left:n,top:o,width:r,height:i}=(0,d.au)(t);return{left:n+r-j,top:o+i+T}},gtmOptions:y(6,"buttonGotIt"),pinClassName:p.Z.topRight},onShowActions:[(0,d.Ie)(o.GjI.designs)],onNextActions:[v(6)],onCancelActions:[h]},{tooltipKey:o.rgO.tutorialsTourTip,options:{title:"tutorial_tooltip_title",description:"tutorial_tooltip_body",buttonType:r.L.finish,overridePosition:(e,t)=>{const{left:n,top:o,width:r}=(0,d.au)(t);return{left:n+r-C,top:o+x}},gtmOptions:y(7,"buttonGotIt"),pinClassName:p.Z.topRight},onShowActions:[(0,a.ci)()],onNextActions:[m],onCancelActions:[m]}],shouldProcessCheck:e=>{const{auth:{currentUser:t},common:{currentPage:n},sidebar:{isSidebarOpened:r},partner:{currentPartner:a},projectData:{project:{group:s}}}=e.getState();const d=new URLSearchParams(window.location.search).get("sidebar");return!(Number(c.Q.get(l.E9.tourTipsViewed))+1===S.steps.length-1&&!t.id)&&((!d||d===o.GjI.designs)&&s!==i.W8.Custom&&Number(c.Q.get(S.cookieKey))<S.steps.length-1&&u.s.artBoard===n&&r&&!Boolean(a))},cookieKey:l.E9.tourTipsViewed};var G=n(24113);const k={[r.L.next]:{src:"wing/arrow-small.svg",iconDirection:"right",locale:"next_button"},[r.L.createDesign]:{src:"wing/arrow-small.svg",iconDirection:"right",locale:"create_design_button"},[r.L.finish]:{src:"wing/checkmark.svg",iconDirection:"bottom",locale:"got_it_button"}};const O={[o.zGK.artBoardTour]:S,[o.zGK.brandKitTourPart1]:G.Z,[o.zGK.brandKitTourPart2]:G.Z}},82726:function(e,t,n){var o;n.d(t,{L:function(){return o}}),function(e){e["next"]="next",e["createDesign"]="createDesign",e["finish"]="finish"}(o||(o={}))},71843:function(e,t,n){n.d(t,{$:function(){return co}});var o=n(55375);var r=n(47815);class i{constructor(e,t,n={}){this.chainName=e,this.dispatch=t.dispatch,this.mapContext(t,n)}getCurrentChain(e){const{chains:{chainList:t}}=e.getState();return t.find(e=>e.name===this.chainName)}}var a=n(6573);class s extends i{mapContext(e){this.project=e.getState().projectData.project}resolve(){return this.dispatch((0,r.DF)(a.eeA.resizeProjectModal,{project:this.project}))}}var c=n(20472);class d extends i{resolve(){this.callback(),this.dispatch((0,o.EU)(this.chainName))}mapContext(e,{success:t=!1}){var n;const{onSuccess:o,onError:r}=(null===(n=this.getCurrentChain(e))||void 0===n?void 0:n.ops)||{};this.callback=(t?o:r)||c.Z}}var l=n(55595);class u extends i{resolve(){return this.inTemplateEditingMode}mapContext(e){const{editingMode:t}=e.getState().artboard;this.inTemplateEditingMode=t===l.a.template}}var p=n(40601);var v=n(19807);var h=n(3681);class m extends i{resolve(){return this.value}mapContext(e,{key:t,transform:n}){this.value=t.reduce((e,t)=>e[t],e.getState()),n&&(this.value=n.call(this,this.value))}}class y extends i{resolve(){return this.option}mapContext(e,{key:t,transform:n}){var o;this.option=null===(o=this.getCurrentChain(e))||void 0===o?void 0:o.ops[t],n&&(this.option=n.call(this,this.option))}}class g extends i{mapContext(e){this.isReady=e.getState().arbiter.isReady}resolve(){return this.isReady}}var f=n(86143);class b extends i{mapContext(e){const{projectData:{loading:t,project:n}}=e.getState();this.isSyncing=!!t||(0,f.Qr)(n)}resolve(){return this.isSyncing}}var P=n(22232);class w extends i{resolve(){(0,P.dC)(()=>this.actions.forEach(e=>this.dispatch(e)))}mapContext(e,{action:t}){this.actions=t}}class j extends i{resolve(){this.dispatch((0,o.Oh)(this.chainName,this.options))}mapContext(e,t){this.options=t}}class T extends i{resolve(){this.dispatch((0,o.Oh)(this.chainName,{expectedActions:this.expectedActions}))}mapContext(e,{actionTypes:t}){var n,o,r;this.expectedActions=null!==(r=null===(o=null===(n=this.getCurrentChain(e))||void 0===n?void 0:n.ops.expectedActions)||void 0===o?void 0:o.concat(t))&&void 0!==r?r:[]}}class C extends i{mapContext(e){this.project=e.getState().projectData.project}resolve(){return this.dispatch((0,o.Oh)(this.chainName,{project:this.project}))}}const[,x,S]=h.qZ;function G(e){return{entry:y,options:{key:"projectSynced",transform:Boolean},children:[{parentResult:!0,break:!0,entry:m,options:{key:["projectData","error"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:C,children:[Object.assign({},e)]}]},{entry:g,children:[{parentResult:!1,break:!0,entry:T,options:{actionTypes:[v.Nu]}},{entry:b,children:[{parentResult:!1,entry:w,options:{action:[(0,p.W3)(!0)]}},{entry:j,options:{projectSynced:!0}},{entry:T,options:{actionTypes:[`${v.yn}_${x}`,`${v.yn}_${S}`]}}]}]}]}}class k extends i{resolve(){return this.isOneOf}mapContext(e,{chainNames:t}){this.isOneOf=t.includes(this.chainName)}}function O(e){return{entry:k,options:{chainNames:[a.zGK.saveProject]},children:[Object.assign({parentResult:!0,break:!0},G(e)),e]}}function I(e){return{entry:u,children:[Object.assign({parentResult:!0,break:!0},O(e)),Object.assign({},G(e))]}}var R=n(11036);var A=n(64196);var K=n(33921);var E=n(20005);var z=n(29539);var D=n(26951);var F=n(1302);var U=n(85910);var _=n(66970);class N extends i{resolve(){return this.shouldRefresh}mapContext(e){const{modal2:{popup:t},common:{currentPage:n}}=e.getState();this.shouldRefresh=a.f0E.includes(t)||_.C.includes(n)}}var M=n(23772);class B extends i{resolve(){this.language&&this.dispatch((0,M.X1)(this.language))}mapContext(e){const{common:{language:t},auth:{currentUser:{language:n}}}=e.getState();this.language=t!==n?n:void 0}}var L=n(97754);var $=n(98605);class J extends i{resolve(){this.path&&L.m&&L.m.replace(this.path)}mapContext(e){const{common:{language:t}}=e.getState();const{location:{pathname:n,search:o}}=window;let r=n.split("/")[1];r=$.i[r]?r:$.X,r!==t&&(this.path=n.replace(new RegExp(`^${$.i[r].prefix}/`),`${$.i[t].prefix}/`)+o)}}class V extends i{resolve(){return this.pages.includes(this.currentPage)}mapContext(e,{pages:t}){this.currentPage=e.getState().common.currentPage,this.pages=t}}class Z extends i{resolve(){this.dispatch((0,r.DF)(this.popup,{source:this.source,shouldCloseOnOverlayClick:this.shouldCloseOnOverlayClick,email:this.email,token:this.token,authPreviewPath:this.authPreviewPath}))}mapContext(e){var t;const{popup:n=a.eeA.registration,shouldCloseOnOverlayClick:o=!0,email:r,token:i,authPreviewPath:s}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};switch(this.popup=n,this.email=r,this.token=i,this.shouldCloseOnOverlayClick=o,this.authPreviewPath=s,this.chainName){case a.zGK.openResizeProjectModal:this.source=a._J2.resize;break;case a.zGK.saveProject:this.source=a._J2.save}}}var Q=n(59725);var q=n(59556);var W=n(20638);var H=n(41710);class X extends i{resolve(){null===L.m||void 0===L.m||L.m.push(this.url)}mapContext(e,{pageName:t,withSearch:n=!1}){const{common:{language:o},team:{currentTeam:r}}=e.getState();this.url=this.getUrl(t,r,o),n&&(this.url+=window.location.search)}getUrl(e,t,n){switch(e){case _.s.home:return(0,q.cd)({currentTeam:t,language:n});case _.s.signUp:return(0,W.B8)(window.location.pathname,n);case _.s.myProjects:return(0,q.jq)({currentTeam:t,language:n});default:return $.i[n].prefix+H.H.get(e)}}}const[,Y]=h.qZ;function ee(e){return{entry:m,options:{key:["auth","currentUser","id"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:N,children:[{parentResult:!0,entry:w,options:{action:[(0,r.qS)(),(0,A.pI)(),(0,z.w)(),(0,K.LK)(),(0,o.t5)(a.zGK.openSubscriptionRebillModal),(0,o.t5)(a.zGK.checkEmailVerificationRender),(0,U.f)(),(0,E.M)(),(0,D.SP)()]}},{parentResult:!0,entry:m,options:{key:["common","currentPage"]},children:[{parentResult:_.s.brandKit,entry:w,options:{action:[(0,F.p0)()]}}]},{parentResult:!0,entry:m,options:{key:["common","currentPage"]},children:[{parentResult:_.s.artBoard,entry:w,options:{action:[(0,p.UI)({})]}}]},{parentResult:!0,entry:B},{entry:J},Object.assign({},e)]},{entry:V,options:{pages:_.C},children:[{parentResult:!0,break:!0,entry:j,options:{authorizationFormWasOpen:!0},children:[{entry:T,options:{actionTypes:[`${Q.w8}_${Y}`,h.XS]}}]},{entry:y,options:{key:"authorizationFormWasOpen",transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:m,options:{key:["common","userAgent","isMobile"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:X,options:{pageName:_.s.signUp},children:[{entry:T,options:{actionTypes:[h.XS]}}]},{entry:Z},{entry:j,options:{authorizationFormWasOpen:!0}},{entry:T,options:{actionTypes:[R.Ex,`${Q.w8}_${Y}`]}}]}]}]}]}}const te=Object.assign({},ee(Object.assign({},I({entry:s,children:[{entry:d}]}))));var ne=n(33426);class oe extends i{resolve(){return this.isOpen}mapContext(e){this.isOpen=!!e.getState().modal2.popup}}const re={entry:oe,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[R.Ex]}},{entry:w,options:{action:[(0,ne.g)(a.JFw.successPurchase)]}},{entry:d}]};class ie extends i{resolve(){return this.currentPage}mapContext(e){this.currentPage=e.getState().common.currentPage}}class ae extends i{mapContext(e){this.isLoading=e.getState().common.localeLoading||!1}resolve(){return this.isLoading}}const[,se]=h.qZ;const ce={entry:ie,children:[{parentResult:_.s.account,break:!0,entry:ae,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[`${h.od}_${se}`]}},{entry:w,options:{action:[(0,ne.g)(a.JFw.profileChanged)]}},{entry:d}]},{entry:d}]};const[,de]=h.qZ;const le={entry:ie,children:[{parentResult:_.s.password,break:!0,entry:ae,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[`${h.od}_${de}`]}},{entry:w,options:{action:[(0,ne.g)(a.JFw.passwordChanged)]}},{entry:d}]},{entry:d}]};class ue extends i{resolve(){this.shouldLoadPlans&&this.dispatch((0,z.w)()),this.dispatch((0,r.DF)(a.eeA.subscriptionModal,this.options))}mapContext(e){var t;const{selectedPlan:n,subscriptionPlansLoaded:o,popupType:r,isUnlimitedPlus:i,isTrialDisabled:a}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};this.options={selectedPlan:n,popupType:r,isUnlimitedPlus:i,isTrialDisabled:a},this.shouldLoadPlans=!o}}const[,pe]=h.qZ;function ve(e){return{entry:m,options:{key:["auth","subscriptionLoaded"]},children:[Object.assign({parentResult:!0,break:!0},e),{entry:m,options:{key:["auth","subscriptionLoading"]},children:[{parentResult:!1,entry:w,options:{action:[(0,A.pI)()]}},{entry:T,options:{actionTypes:[`${Q.$T}_${pe}`]}}]}]}}var he=n(66777);class me extends i{resolve(){this.dispatch((0,he.V)(this.promoCode))}mapContext(e){var t;this.promoCode=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.promoCode)||new URLSearchParams(window.location.search).get("promoCode")||""}}class ye extends i{resolve(){return this.shouldActivate}mapContext(e){var t;const{promoCode:n,promoCodeActivated:o}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};this.shouldActivate=!(o||!n&&!new URLSearchParams(window.location.search).get("promoCode"))}}function ge(e){return{entry:ye,children:[Object.assign({parentResult:!1,break:!0},e),{entry:me},{entry:j,options:{promoCodeActivated:!0}},{entry:T,options:{actionTypes:[he.V.async.done.type,he.V.async.failed.type]}}]}}const fe=Object.assign({},ee(Object.assign({},ge(Object.assign({},ve({entry:ue,children:[{entry:d}]}))))));var be=n(24316);class Pe extends i{resolve(){return this.value}mapContext(e,{key:t,transform:n}){this.value=be.Q.get(t),n&&(this.value=n.call(this,this.value))}}var we=n(21356);class je extends i{mapContext(e){const{auth:{subscription:t}}=e.getState();this.isRebillError=(0,we.Rg)(t)&&!!t.failedCount}resolve(){return this.isRebillError}}class Te extends i{resolve(){return this.isRunning}mapContext(e,{ignoreChains:t=[],runningChains:n}){const{chains:{chainList:o}}=e.getState();if(n)return void(this.isRunning=o.some(({name:e})=>n.includes(e)));const r=[this.chainName,...t];this.isRunning=o.some(({name:e})=>!r.includes(e))}}var Ce=n(75494);class xe extends i{mapContext(e){const{auth:{subscription:{rebillExpiresAt:t}}}=e.getState();this.expiresIn=t?t-Date.now():0}resolve(){return be.Q.set(Ce.E9.subscriptionRebillModal,"true",{expiresIn:this.expiresIn})}}var Se=n(38763);const Ge={entry:Pe,options:{key:Ce.E9.subscriptionRebillModal,transform:Boolean},children:[Object.assign({parentResult:!1,break:!0},ve({entry:je,children:[{parentResult:!0,break:!0,entry:oe,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[R.Ex]}},{entry:Te,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[Se.iP]}},{entry:w,options:{action:[(0,r.DF)(a.eeA.subscriptionRebillModal)]}},{entry:xe},{entry:d}]}]},{entry:d}]})),{entry:d}]};var ke=n(77840);const Oe=[_.s.share,_.s.partnerError,..._.C];class Ie extends i{resolve(){return this.isCookiesAccepted}mapContext(e){const{auth:{currentUser:t},common:{currentPage:n,userAgent:{isMobile:o}}}=e.getState();this.isCookiesAccepted=!!t.id||o||!!be.Q.get(Ce.E9.allowCookies)||Oe.includes(n)}}const Re={entry:Ie,children:[{parentResult:!1,entry:w,options:{action:[(0,ke.B)(a.fzD.acceptCookies)]}},{entry:d}]};class Ae extends i{mapContext(e){const{paymentCard:{card:t}}=e.getState();const n=this.getCurrentChain(e);this.shouldShowNotification=(null==n?void 0:n.ops.cardId)!==(null==t?void 0:t.id)}resolve(){return this.shouldShowNotification}}const Ke={entry:y,options:{key:"replaceCardModalWasOpen",transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{action:[(0,r.DF)(a.eeA.replaceCardModal)]},children:[{entry:j,options:{replaceCardModalWasOpen:!0}},{entry:T,options:{actionTypes:[R.Ex]}}]},{entry:Ae,children:[{parentResult:!0,entry:w,options:{action:[(0,ne.g)(a.JFw.cardReplaced)]}}]},{entry:d}]};var Ee=n(13382);var ze=n(18127);var De=n(77302);var Fe=n(32214);var Ue=n(3867);var _e=n(12095);var Ne=n(97403);var Me=n(37620);var Be=n(87323);var Le=n(92268);var $e=n(39543);var Je=n(12931);var Ve=n(29566);var Ze=n(19258);var Qe=n(86079);var qe=n(7343);var We=n(47523);var He=n(18154);var Xe=n(63546);var Ye=n(70874);class et extends i{resolve(){return this.shouldSave}mapContext(e){const{projectData:{project:t,isDraft:n,loading:o,error:r}}=e.getState();this.shouldSave=(0,Ye.X)(t)&&!r&&!o&&n&&(!!t.id||!(0,Xe.Po)(t))}}const tt=0;const nt={entry:et,children:[{parentResult:!0,entry:w,options:{action:[(0,p.W3)(!0)]}},{entry:w,options:{action:[(0,p.Pv)(),(0,_e.b3)(!0),(0,Ne.dO)(),(0,Me.eP)(),(0,Be.fT)(),(0,Ue.M0)(),(0,De.oA)(),(0,Fe.oA)(),(0,Ee.oA)(),(0,Ze.oA)(),(0,Je.x)(He.F.stockVideos),(0,Je.x)(He.F.partnerPhotos),(0,Je.x)(He.F.premiumPhotos),(0,Je.x)(He.F.stockPhotos),(0,Je.x)(He.F.animations),(0,Je.x)(He.F.graphics),(0,Je.x)(He.F.textStyles),(0,Ve.xs)(),(0,$e.H)(We.g.animations),(0,$e.H)(We.g.object),(0,$e.H)(We.g.design),(0,Le.f9)(qe.g.animations),(0,Le.f9)(qe.g.objects),(0,Le.f9)(qe.g.design),(0,Qe.j)()]}},{entry:ie,children:[{parentResult:_.s.artBoard,break:!0,entry:d},{entry:w,options:{action:[(0,p.Qr)(),(0,ze.EZ)(0)]}},{entry:d}]}]};function ot(e){return{entry:y,options:{key:"subscriptionPlansLoaded",transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},e),{entry:w,options:{action:[(0,z.w)()]}},{entry:j,options:{subscriptionPlansLoaded:!0}},{entry:T,options:{actionTypes:[z.w.async.done.type]}}]}}class rt extends i{resolve(){return this.canPurchase}mapContext(e){var t;const{subscriptionPlans:{list:n}}=e.getState();const o=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedPlan;this.canPurchase=n.some(({isAvailableToSwitch:e,type:t})=>e&&t===o)}}const it=Object.assign({},ee(Object.assign({},ve(Object.assign({},ot({parentResult:!0,entry:rt,children:[{parentResult:!0,entry:ue},{parentResult:!1,entry:m,options:{key:["auth","subscription","type"],transform:Boolean},children:[{parentResult:!1,entry:X,options:{pageName:_.s.home}}]},{entry:d}]}))))));class at extends i{resolve(){this.options&&this.dispatch((0,o.Oh)(this.chainName,this.options))}mapContext(e){const{subscriptionPlans:{list:t}}=e.getState();const n=new URLSearchParams(window.location.search);const o=n.get("selectedPlan");const r=n.get("isTrialDisabled");const i=t.find(({isAvailableToSwitch:e,type:t})=>e&&(!o||o===t));i&&(this.options=Object.assign({selectedPlan:i.type},r&&{isTrialDisabled:!0}))}}class st extends i{resolve(){return this.value}mapContext(e,{key:t,transform:n}){this.value=new URLSearchParams(window.location.search).get(t),n&&(this.value=n.call(this,this.value))}}class ct extends i{resolve(){window.location.href=this.url}mapContext(){const e=new URLSearchParams(window.location.search).get("token");this.url=`/api/teams/invite/?inviteToken=${e}`}}class dt extends i{resolve(){this.url&&(null===L.m||void 0===L.m||L.m.replace(this.url))}mapContext(e){const{auth:{currentUser:t},common:{currentPage:n,userAgent:{isMobile:o}},partner:{currentPartner:r}}=e.getState();const{language:i}=t;_.C.includes(n)&&(this.url=(0,q.Uv)({language:i,search:window.location.search,currentUser:t,currentPartner:r,isMobile:o}))}}function lt(e){return Object.assign({},ee({entry:st,options:{key:"token",transform:Boolean},children:[{parentResult:!0,break:!0,entry:ct},{entry:dt},Object.assign({},e)]}))}const ut=Object.assign({},lt(Object.assign({},ge(Object.assign({},ot({entry:at,children:[{entry:y,options:{key:"selectedPlan",transform:Boolean},children:[{parentResult:!0,entry:ue},{entry:d}]}]}))))));const pt={entry:Te,options:{runningChains:[a.zGK.tryDownloadAsset]},children:[Object.assign({parentResult:!1,break:!0},lt({entry:d,options:{success:!0}})),{entry:d}]};class vt extends i{resolve(){return this.dispatch((0,ne.g)(a.JFw.emailVerified,{email:this.email}))}mapContext(){this.email=new URLSearchParams(window.location.search).get("emailVerified")||void 0}}const ht={entry:st,options:{key:"emailVerified",transform:Boolean},children:[{parentResult:!0,entry:vt,children:[{entry:m,options:{key:["common","userAgent","isMobile"],transform:Boolean},children:[{parentResult:!0,entry:X,options:{pageName:_.s.landing}}]}]},{entry:d}]};var mt=n(75888);var yt=n(61320);var gt=n.n(yt);class ft extends i{resolve(){return be.Q.set(Ce.E9.emailVerifiedDisabled,this.value,{expiresIn:a.IJB})}mapContext(){this.value=gt()().add(a.IJB,"milliseconds").toString()}}class bt extends i{resolve(){setTimeout(()=>{this.actions.forEach(e=>this.dispatch(e))},this.time)}mapContext(e,{actions:t,time:n}){this.actions=t,this.time=n}}const Pt={entry:m,options:{key:["emailVerified","isEmailVerificationDisabled"],transform:Boolean},children:[{parentResult:!0,entry:d,break:!0},{entry:w,options:{action:[(0,mt.uz)(!0),(0,mt.w$)()]}},{entry:ft},{entry:bt,options:{actions:[(0,mt.uz)(!1)],time:a.IJB}},{entry:d}]};var wt=n(74872);class jt extends i{resolve(){this.chain!==a.zGK.showSubscriptionSuccessfully?(this.chain&&this.dispatch((0,o.t5)(this.chain,this.chainOptions)),this.popup&&this.dispatch((0,r.DF)(this.popup,this.popupOptions))):this.dispatch((0,wt.H)())}mapContext(){const e=new URLSearchParams(window.location.search).get("popup");switch(e){case a.eeA.login:case a.eeA.registration:this.chain=a.zGK.authorizationUser,this.chainOptions={popup:e};break;case a.eeA.subscriptionSuccessfulModal:this.chain=a.zGK.showSubscriptionSuccessfully;break;case a.eeA.joinTeamModal:this.popup=a.eeA.joinTeamModal;break;case a.eeA.visaModal:this.chain=a.zGK.authorizationUser,this.chainOptions={onSuccess:()=>this.dispatch((0,r.DF)(e))};break;case a.eeA.subscriptionModal:this.chain=a.zGK.openSubscriptionModalByQuery}}}var Tt=n(44251);class Ct extends i{resolve(){null===L.m||void 0===L.m||L.m.replace(this.path)}mapContext(e,{removeParams:t}){const{location:{pathname:n,search:o}}=window;const{query:r}=(0,Tt.en)(o,!0);t.forEach(e=>delete r[e]),this.path=(0,Tt.CN)({pathname:n,query:r})}}function xt(e){return{entry:oe,children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[R.Ex]}},{entry:st,options:{key:"openDphModal",transform:Boolean},children:[Object.assign({parentResult:!1,break:!0},e),{entry:y,options:{key:"dphModalWasOpen",transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},e),{entry:j,options:{dphModalWasOpen:!0}},{entry:T,options:{actionTypes:[R.Ex]}}]}]}]}}const St={entry:st,options:{key:"popup",transform:Boolean},children:[Object.assign({parentResult:!0},xt({entry:jt,children:[{entry:Ct,options:{removeParams:["popup","email","token"]}}]})),{entry:d}]};class Gt extends i{resolve(){return this.shouldRender}mapContext(e){const{common:{userAgent:t},auth:{currentUser:n}}=e.getState();this.shouldRender=!t.isMobile&&!!n.id&&!n.emailVerified&&n.sourceProvider!==Ce.TN.crelloButtonPartner}}function kt(e){return{entry:m,options:{key:["emailVerified","shouldRenderEmailVerified"]},children:[{parentResult:!e,entry:w,options:{action:[(0,mt.un)(e)]}}]}}const Ot={entry:Gt,children:[{parentResult:!0,entry:V,options:{pages:[_.s.home,_.s.myProjects,_.s.formats,_.s.brandKit,_.s.collection,_.s.formatTemplates,_.s.referral,_.s.password,_.s.subscription,_.s.promocodes,_.s.invoices,_.s.earnings]},children:[Object.assign({parentResult:!1,break:!0},kt(!1)),{entry:Pe,options:{key:Ce.E9.emailVerifiedRender,transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},kt(!1)),kt(!0)]}]},{entry:d}]};class It extends i{resolve(){setTimeout(()=>{this.dispatch((0,mt.uz)(!1))},this.time)}mapContext(){const e=new Date(be.Q.get(Ce.E9.emailVerifiedDisabled));this.time=Number(e)-Date.now()}}const Rt={entry:m,options:{key:["auth","currentUser","id"],transform:Boolean},children:[{parentResult:!0,entry:Pe,options:{key:Ce.E9.emailVerifiedDisabled,transform:Boolean},children:[{parentResult:!0,entry:w,options:{action:[(0,mt.uz)(!0)]}},{parentResult:!0,entry:It}]},{entry:d}]};class At extends i{resolve(){return this.shouldChange}mapContext(e){var t;const{team:{currentTeam:{id:n=""}}}=e.getState();const{teamId:o=""}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};this.shouldChange=n!==o}}class Kt extends i{resolve(){return this.canChange}mapContext(e){var t,n;const{team:{list:o}}=e.getState();const r=null!==(n=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.teamId)&&void 0!==n?n:"";this.canChange=!r||o.some(({id:e,isActive:t})=>e===r&&t)}}class Et extends i{resolve(){be.Q.set(Ce.E9.teamId,this.teamId),this.dispatch((0,K.Vk)(this.teamId))}mapContext(e){var t;this.teamId=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.teamId)||""}}var zt=n(24687);class Dt extends i{resolve(){this.redirectUrl&&(null===L.m||void 0===L.m||L.m.replace(this.redirectUrl))}mapContext(e){const{common:{currentPage:t,language:n},team:{currentTeam:o}}=e.getState();switch(t){case _.s.account:case _.s.password:case _.s.subscription:case _.s.invoices:case _.s.promocodes:case _.s.referral:case _.s.earnings:case _.s.subscriptionCenter:this.redirectUrl=`${$.i[n].prefix}/team/settings/`;break;case _.s.team:const e=(0,zt.SE)(o)?"team/settings":"user/settings/account";this.redirectUrl=`${$.i[n].prefix}/${e}`;break;case _.s.myProjects:this.redirectUrl=(0,q.jq)({currentTeam:o,language:n});break;case _.s.home:case _.s.artBoard:this.redirectUrl=(0,q.cd)({currentTeam:o,language:n})}}}const Ft={entry:At,children:[{parentResult:!0,entry:Kt,children:[{parentResult:!0,entry:Et,children:[{entry:w,options:{action:[(0,A.pI)(!0)]}},{entry:Dt},{entry:m,options:{key:["common","currentPage"]},children:[{parentResult:_.s.brandKit,entry:w,options:{action:[(0,F.p0)()]}},{parentResult:_.s.myProjects,entry:w,options:{action:[(0,Ne.NQ)(),(0,Ne.ti)(a.ZJt),(0,Ne.He)({skip:0}),(0,_e.xh)(CONFIG.FOLDER_TYPES.project)]}},{parentResult:_.s.home,entry:w,options:{action:[(0,Ne.dO)(),(0,Ne.He)({skip:0})]}}]}]},{parentResult:!1,entry:ue}]},{entry:d}]};var Ut=n(99977);class _t extends i{resolve(){this.dispatch((0,K.MH)(this.email))}mapContext(e){var t;const n=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.email;if(!n)throw new Error("email is empty");this.email=n}}const[,Nt,Mt]=h.qZ;const Bt={entry:y,options:{key:"memberRemoved",transform:Boolean},children:[{parentResult:!1,break:!0,entry:_t,children:[{entry:j,options:{memberRemoved:!0}},{entry:T,options:{actionTypes:[`${Ut.xb}_${Nt}`,`${Ut.xb}_${Mt}`]}}]},{entry:m,options:{key:["team","currentTeam","currentUserRole"]},children:[{parentResult:a.Kd1.member,entry:w,options:{action:[(0,o.t5)(a.zGK.changeTeam),(0,K.LK)()]}}]},{entry:d}]};class Lt extends i{resolve(){return this.hasActiveTeam}mapContext(e){this.hasActiveTeam=(0,zt.sp)(e.getState().team.list)}}const[,$t]=h.qZ;const Jt={entry:y,options:{key:"createTeamModalWasOpen",transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{action:[(0,r.DF)(a.eeA.createTeam)]},children:[{entry:j,options:{createTeamModalWasOpen:!0}},{entry:T,options:{actionTypes:[`${Ut.gb}_${$t}`,R.Ex]}}]},{entry:Lt,children:[{parentResult:!0,entry:X,options:{pageName:_.s.team}}]},{entry:d}]};var Vt=n(22709);const[,Zt]=h.qZ;const Qt={entry:y,options:{key:"trashFolderCleaned",transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{action:[(0,_e.S)()]},children:[{entry:j,options:{trashFolderCleaned:!0}},{entry:T,options:{actionTypes:[`${Vt.g2}_${Zt}`]}}]},{entry:w,options:{action:[(0,Ne.He)({skip:0}),(0,Ne.NQ)()]}},{entry:d}]};var qt=n(51042);class Wt extends i{resolve(){if(this.sidebar===a.GjI.favorites)return void this.dispatch((0,o.t5)(a.zGK.authorizationUser,{onSuccess(){this.dispatch((0,Ue.JW)({activeSidebarTab:a.GjI.favorites}))}}));let e={activeSidebarTab:this.sidebar||a.GjI.designs};this.sidebar===a.GjI.text&&this.tab===a.O$g.fonts?e=Object.assign(Object.assign({},e),{activeTextsTab:this.tab}):this.sidebar===a.GjI.music&&this.tab===a.X4n.explore?e=Object.assign(Object.assign({},e),{activeMusicTab:this.tab}):this.sidebar!==a.GjI.background||this.tab!==Ce.KU.videos&&this.tab!==Ce.KU.colors?this.sidebar===a.GjI.library&&this.tab===a.PpC.purchased&&(e=Object.assign(Object.assign({},e),{activeLibraryTab:this.tab})):e=Object.assign(Object.assign({},e),{activeBackgroundsTab:this.tab}),this.dispatch((0,Ue.JW)(e))}mapContext(e){const t=new URLSearchParams(window.location.search);const n=t.get("sidebar");const o=t.get("tab");const r=t.get("sidebarDesignType");const{projectData:{project:{group:i}},team:{currentTeam:s}}=e.getState();switch(n){case a.GjI.music:case a.GjI.photos:case a.GjI.background:case a.GjI.text:case a.GjI.styles:case a.GjI.graphics:case a.GjI.library:case a.GjI.video:case a.GjI.animation:case a.GjI.brandKit:this.sidebar=n}n!==a.GjI.favorites||(0,zt.SE)(s)||(this.sidebar=n),i===qt.W8.Custom&&(this.sidebar=a.GjI.photos),i===qt.W8.Custom&&r&&(this.sidebar=a.GjI.designs),this.tab=String(o),(0,zt.SE)(s)&&(this.tab="")}}const[,Ht]=h.qZ;const Xt={entry:m,options:{key:["projectData","loadingProject"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[`${v.tx}_${Ht}`]}},{entry:Wt},{entry:w,options:{action:[(0,o.t5)(a.zGK.setActiveStyleGroup)]}},{entry:d}]};var Yt=n(7201);class en extends i{resolve(){this.dispatch((0,Yt.z)({projectId:this.projectId}))}mapContext(e){var t;const n=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.projectId;if(null==n)throw new Error("projectId is empty");this.projectId=n}}class tn extends i{mapContext(e){const{exportProject:{exportedTemplateId:t}}=e.getState();if(null==t)throw new Error("Exported template id not found");this.exportedTemplateUrl=`/user/templates/${t}`}resolve(){return window.open(this.exportedTemplateUrl,"_blank")}}const nn={entry:y,options:{key:"projectExported",transform:Boolean},children:[{parentResult:!1,break:!0,entry:en,children:[{entry:j,options:{projectExported:!0}},{entry:T,options:{actionTypes:[Yt.z.async.done.type,Yt.z.async.failed.type]}}]},{entry:m,options:{key:["exportProject","error"],transform:Boolean},children:[{parentResult:!1,entry:w,options:{action:[(0,ne.g)(a.JFw.exportProjectSuccess)]}},{parentResult:!0,entry:w,options:{action:[(0,ne.g)(a.JFw.exportProjectError)]}},{entry:w,options:{action:[(0,r.qS)()]}},{entry:tn}]},{entry:d}]};var on=n(12966);class rn extends i{resolve(){return this.shouldClose}mapContext(e){var t,n;const{arbiter:{selectedElement:o},sidebar:{actionsPanel:r}}=e.getState();this.shouldClose=!!r&&(null==o?void 0:o.type)!==(null===(n=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement)||void 0===n?void 0:n.type)}}var an=n(60266);class sn extends i{resolve(){this.dispatch((0,an.cl)(this.selectedElement))}mapContext(e){var t;this.selectedElement=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement}}class cn extends i{resolve(){return this.isSelectedElementExist}mapContext(e){var t;this.isSelectedElementExist=!!(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement)}}var dn=n(48234);class ln extends i{resolve(){return this.shouldClose}mapContext(e){var t,n,o,r,i,a;const{arbiter:s,sidebar:{subActionsPanel:c}}=e.getState();const d=s.selectedElement;const l=null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops.selectedElement;const u=l&&(null===(o=null===(n=l)||void 0===n?void 0:n.psParams)||void 0===o?void 0:o.processingType)===Ce.pU.removeBg;const p=d&&u&&l&&d.id===l.id;this.shouldClose=null!=c&&!p&&((null==d?void 0:d.uuid)!==(null==l?void 0:l.uuid)||!!(null===(r=null==d?void 0:d.animationProps)||void 0===r?void 0:r.type)!=!!(null===(i=null==l?void 0:l.animationProps)||void 0===i?void 0:i.type)||(null===(a=l.animationProps)||void 0===a?void 0:a.type)===dn.AnimationTypes.noEffect)}}var un=n(59312);var pn=n(62189);var vn=n(22559);const hn={tooltipKey:a.rgO.removeBackgroundTip,options:{title:"tour_title_7",description:"tour_text_7",overridePosition:(e,t)=>{const{left:n,top:o,height:r}=(0,pn.au)(t);return{left:n,top:o+r+16}},pinClassName:vn.Z.topLeft},cookieKey:Ce.E9.removeBackgroundTourViewed,shouldShow:e=>{const{arbiter:{selectedElement:t},common:{currentPage:n},partner:{currentPartner:o}}=e.getState();return(null==t?void 0:t.type)===dn.DesignElementType.ImageElement&&!be.Q.get(hn.cookieKey)&&_.s.artBoard===n&&!Boolean(o)}};const mn=[hn];class yn extends i{resolve(){return(0,un.mG)(this,void 0,void 0,function*(){if(!this.tooltipToShow)return;const{cookieKey:e,tooltipKey:t,options:n}=this.tooltipToShow;this.dispatch((0,o.Oh)(this.chainName,{tooltipKey:t,tooltipOptions:n})),be.Q.set(e,"true")})}mapContext(e){this.tooltipToShow=mn.find(({shouldShow:t})=>t(e))}}const gn=[a.rgO.subHeaderFlip,a.rgO.subHeaderLayer,a.rgO.subHeaderAlign,a.rgO.subHeaderTransparency,a.rgO.subHeaderOutlines];const fn={entry:rn,children:[{entry:cn,children:[{parentResult:!1,entry:w,options:{action:[(0,on.i8)(gn)]}}]},{parentResult:!0,entry:w,options:{action:[(0,Ue.Y4)(null)]}},{entry:ln,children:[{parentResult:!0,entry:w,options:{action:[(0,Ue.BX)(null)]}}]},{entry:sn},{entry:Te,children:[{parentResult:!1,entry:yn}]},{entry:d}]};var bn=n(28177);var Pn=n(68841);class wn extends i{resolve(){return this.shouldAd}mapContext(e){const{auth:{currentUser:t},dphItem:{item:n}}=e.getState();this.shouldAd=!!t.id&&(null==n?void 0:n.id)!==CONFIG.defaultPhotoForFromDepositModal}}var jn=n(40943);class Tn extends i{resolve(){this.dispatch((0,jn.R3)({favoriteMediaId:this.favoriteData,favoriteType:Ce.Ld.photo,isFavorite:!0}))}mapContext(e){const{dphItem:{item:t}}=e.getState();if(null==t)throw new Error("dphItem is empty");this.favoriteData=t.dphId}}var Cn=n(27010);var xn=n(81976);class Sn extends i{resolve(){this.dispatch((0,Cn.j)({dphId:this.dphId,itemType:this.itemType,openModal:!0}))}mapContext(e){var t;const{dphId:n,itemType:o=xn.Y.imageElement}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};if(null==n)throw new Error("dphId is empty");this.dphId=n,this.itemType=o}}function Gn(e){return{entry:m,options:{key:["dphItem","item"],transform:Boolean},children:[Object.assign({parentResult:!0,break:!0},e),{entry:Sn,children:[{entry:T,options:{actionTypes:[Cn.j.async.done.type]}}]}]}}var kn=n(28548);const On=Object.assign({},Gn({entry:m,options:{key:["vendorTemplates","items","length"],transform:Boolean},children:[{parentResult:!1,break:!0,entry:w,options:{action:[(0,bn.L)()]},children:[{entry:T,options:{actionTypes:[bn.L.async.done.type]}}]},{entry:w,options:{action:[(0,r.DF)(a.eeA.fromDepositModal)]}},{entry:wn,children:[{parentResult:!0,entry:Tn},{parentResult:!0,entry:w,options:{action:[(0,Ue.JW)({activeSidebarTab:a.GjI.favorites}),(0,Pn.v7)(kn.h.photo)]}}]},{entry:d}]}));var In=n(68327);var Rn=n(6086);class An extends i{resolve(){const e=this.error instanceof Rn.hV?a.JFw.removeBgUnknownForeground:a.JFw.removeBgError;this.dispatch((0,ne.g)(e))}mapContext(e){const{photoshop:{error:t}}=e.getState();this.error=t}}class Kn extends i{resolve(){return!this.backgroundRemoved}mapContext(e){var t,n;const{arbiter:{selectedElement:o}}=e.getState();this.backgroundRemoved=(null===(n=null===(t=o)||void 0===t?void 0:t.psParams)||void 0===n?void 0:n.processingType)===Ce.pU.removeBg}}class En extends i{resolve(){var e;null===(e=this.arbiter)||void 0===e||e.selectElements([this.currentElementUUID]),this.dispatch((0,In.Sq)(Object.assign({elementUUID:this.currentElementUUID,elementMediaId:this.currentElementMediaId,processingType:Ce.pU.removeBg},this.currentElementDphId&&{originalDphId:Number(this.currentElementDphId)})))}mapContext(e){const t=this.getCurrentChain(e);const{mediaId:n,dphId:o,elementUuid:r,arbiter:i}=t.ops;const a=n||o;if(null==a||null==r)throw new Error(`lack of some properties in the chain:, ${t}`);this.currentElementDphId=o,this.currentElementUUID=r,this.currentElementMediaId=a,this.arbiter=i}}function zn(){return{entry:Kn,children:[{entry:d,parentResult:!1,break:!0,options:{success:!0}},{entry:y,options:{key:"backgroundRemoved",transform:Boolean},children:[{entry:m,parentResult:!0,break:!0,options:{key:["photoshop","error"],transform:Boolean},children:[{entry:An,parentResult:!0,break:!0,children:[{entry:d}]},{entry:d,options:{success:!0}}]},{entry:En},{entry:j,options:{backgroundRemoved:!0}},{entry:T,options:{actionTypes:[In.Sq.async.done.type,In.Sq.async.failed.type]}}]}]}}const Dn=Object.assign({},ee(Object.assign({},I(Object.assign({},zn())))));const[,Fn]=h.qZ;const Un={entry:m,options:{key:["projectData","loadedProject"],transform:Boolean},children:[{parentResult:!1,break:!0,entry:T,options:{actionTypes:[`${v.tx}_${Fn}`]}},{entry:m,options:{key:["projectData","project","v2"],transform:Boolean},children:[{parentResult:!1,entry:w,options:{action:[(0,p.YB)()]}}]},{entry:d}]};var _n=n(31575);class Nn extends i{resolve(){return this.shouldShow}mapContext(e){var t,n;this.shouldShow=null!==(n=null===(t=_n.a[this.chainName])||void 0===t?void 0:t.shouldProcessCheck(e))&&void 0!==n&&n}}class Mn extends i{runActions(e=[]){e.forEach(this.dispatch)}resolve(){if(!this.currentStep)return;const{tooltipKey:e,onShowActions:t,onCancelActions:n,onNextActions:r,options:i}=this.currentStep;be.Q.set(this.tour.cookieKey,String(this.tourStepIndex)),this.runActions(t),this.dispatch((0,o.Oh)(this.chainName,{tooltipKey:e,tooltipOptions:Object.assign(Object.assign({},i),{onNext:()=>{this.runActions(r)},onCancel:()=>{this.runActions(n)}})}))}mapContext(e){var t;const{tourStepIndex:n}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};const o=_n.a[this.chainName];if(!o)return;this.tour=o,this.tourStepIndex=null!=n?n:0;const{steps:r}=this.tour;this.tourStepIndex<r.length&&(this.currentStep=r[this.tourStepIndex])}}const Bn="true";class Ln extends i{resolve(){void 0!==this.valueToSet&&be.Q.set(this.cookieKey,String(this.valueToSet)),void 0!==this.valueToSetInOps&&this.dispatch((0,o.Oh)(this.chainName,{tourStepIndex:this.valueToSetInOps}))}mapContext(e){var t;const{tourStepIndex:n}=(null===(t=this.getCurrentChain(e))||void 0===t?void 0:t.ops)||{};const o=_n.a[this.chainName];if(!o)return;const{cookieKey:r,steps:i}=o;const a=be.Q.get(r);if(a===Bn)this.cookieKey=r,this.valueToSet=i.length-1;else if(void 0===n){const e=Number(a);this.valueToSetInOps=""===a||Number.isNaN(e)?0:e+1}}}function $n(e){return{entry:Ln,children:[{entry:Nn,children:[{parentResult:!1,entry:d,break:!0},{entry:Mn},Object.assign({},e)]}]}}const[,Jn]=h.qZ;const Vn=[a.rgO.artboardTourTip1,a.rgO.artboardTourTip2,a.rgO.artboardTourTip3,a.rgO.artboardTourTip4,a.rgO.artboardTourTip5,a.rgO.brandKitTourTip5,a.rgO.tutorialsTourTip];const Zn={entry:m,options:{key:["projectData","loadingProject"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:T,options:{actionTypes:[`${v.tx}_${Jn}`]}},{entry:m,options:{key:["projectData","project","isLocked"],transform:Boolean},children:[{parentResult:!0,break:!0,entry:d},{entry:m,options:{key:["sidebar","isSidebarOpened"],transform:Boolean},children:[{parentResult:!1,entry:w,options:{action:[(0,on.i8)(Vn)]}}]},Object.assign({},$n({entry:T,options:{actionTypes:[h.XS,Ue.GB.type]}}))]}]};const Qn=Object.assign({},$n({entry:T,options:{actionTypes:[h.XS]}}));var qn=n(89025);class Wn extends i{resolve(){if(this.dphItem&&(0,Ye.X)(this.project)){const{width:e,height:t}=this.dphItem;const{pageWidth:n,pageHeight:o}=this.project;const r=(0,qn.xL)({width:n,height:o},{width:e,height:t},this.dphItem);this.dispatch((0,an.fb)(r))}}mapContext(e){const{dphItem:{item:t},projectData:{project:n}}=e.getState();this.dphItem=t,this.project=n}}const Hn=Object.assign({},Gn({entry:Wn,children:[{entry:d}]}));class Xn extends i{pickStyleGroup(e,[t,n]){const o=t.styleGroups.find(({styleGroup:{id:t}})=>t===e);if(o)return this.type=qe.g.animations,void(this.styleGroup=o.styleGroup);const r=n.styleGroups.find(({styleGroup:{id:t}})=>t===e);r&&(this.type=qe.g.objects,this.styleGroup=r.styleGroup)}resolve(){this.type&&this.styleGroup&&this.dispatch((0,Le.j4)({type:this.type,styleGroup:this.styleGroup}))}mapContext(e){const t=new URLSearchParams(window.location.search).get("folder");const{styleGroupAnimations:n,styleGroupObjects:o}=e.getState();const r=String(t);this.pickStyleGroup(r,[n,o])}}const Yn=[a.GjI.animation,a.GjI.graphics];class eo extends i{resolve(){return this.shouldSet}mapContext(){const e=new URLSearchParams(window.location.search);const t=e.get("folder");const n=e.get("sidebar");this.shouldSet=!!t&&Yn.includes(String(n))}}const[,to]=h.qZ;const no="styleGroupsLoaded";const oo={entry:eo,children:[{parentResult:!0,break:!0,entry:y,options:{key:no,transform:Boolean},children:[{parentResult:!1,break:!0,entry:T,options:{actionTypes:[`${We.g.animations}_${to}`,`${We.g.object}_${to}`]},children:[{entry:j,options:{[no]:!0}}]},{entry:Xn},{entry:d}]},{entry:d}]};var ro=n(64564);const io={[a.zGK.artBoardTour]:Zn,[a.zGK.brandKitTourPart1]:Qn,[a.zGK.brandKitTourPart2]:Zn,[a.zGK.openResizeProjectModal]:te,[a.zGK.successPurchaseNotification]:re,[a.zGK.showProfileHeaderNotification]:ce,[a.zGK.openSubscriptionModal]:fe,[a.zGK.showChangePasswordNotification]:le,[a.zGK.openSubscriptionRebillModal]:Ge,[a.zGK.acceptCookies]:Re,[a.zGK.showCardReplacedNotification]:Ke,[a.zGK.onArtBoardUnmount]:nt,[a.zGK.plansPage]:it,[a.zGK.openSubscriptionModalByQuery]:ut,[a.zGK.authorizationUser]:pt,[a.zGK.showEmailVerifiedHeaderNotification]:ht,[a.zGK.resendEmailVerification]:Pt,[a.zGK.openModalByQuery]:St,[a.zGK.checkEmailVerificationRender]:Ot,[a.zGK.checkEmailVerificationDisabled]:Rt,[a.zGK.changeTeam]:Ft,[a.zGK.removeTeamMember]:Bt,[a.zGK.createTeam]:Jt,[a.zGK.cleanTrashFolder]:Qt,[a.zGK.setActiveSidebar]:Xt,[a.zGK.exportProject]:nn,[a.zGK.setSelectedElement]:fn,[a.zGK.openFromDepositModal]:On,[a.zGK.toggleImageBackground]:Dn,[a.zGK.convertExistingProjectToV2]:Un,[a.zGK.addDphItemToArtBoard]:Hn,[a.zGK.setActiveStyleGroup]:oo};function ao(e,t,n){const o=new n.entry(e,t,n.options).resolve();n.children&&n.children.some(n=>("undefined"==typeof n.parentResult||n.parentResult===o)&&(ao(e,t,n),!!n.break))}function so(e){let t=[];return()=>{const{chains:{chainList:n}}=e.getState();if(t===n)return;t=n;const r=[];const i=n.filter(e=>!e.ops[ro.G.thunkChain]).reduce((e,t)=>{if(!io[t.name])throw new Error(`Chain ${t.name} is not defined`);return t.ops.processAction&&(r.push(t.name),e.push(t)),e},[]);i.length&&(e.dispatch((0,o.zi)(r,{processAction:!1})),i.forEach(t=>{ao(t.name,e,io[t.name])}))}}function co(e){e.subscribe(so(e))}},64564:function(e,t,n){var o;var r;n.d(t,{G:function(){return o},B:function(){return r}}),function(e){e["expectedActions"]="expectedActions",e["onError"]="onError",e["onSuccess"]="onSuccess",e["processAction"]="processAction",e["project"]="project",e["popup"]="popup",e["popupType"]="popupType",e["selectedPlan"]="selectedPlan",e["shouldCloseOnOverlayClick"]="shouldCloseOnOverlayClick",e["source"]="source",e["teamId"]="teamId",e["email"]="email",e["token"]="token",e["subscriptionPlansLoaded"]="subscriptionPlansLoaded",e["projectId"]="projectId",e["projectIds"]="projectIds",e["shouldCloneProjects"]="shouldCloneProjects",e["shouldResetSelected"]="shouldResetSelected",e["showNotification"]="showNotification",e["selectedElement"]="selectedElement",e["cardId"]="cardId",e["shouldGetProjectPreview"]="shouldGetProjectPreview",e["renameProject"]="renameProject",e["format"]="format",e["onlyCurrentPage"]="onlyCurrentPage",e["dphId"]="dphId",e["mediaId"]="mediaId",e["itemType"]="itemType",e["downloadProcessType"]="downloadProcessType",e["promoCode"]="promoCode",e["promoCodeActivated"]="promoCodeActivated",e["tourStepIndex"]="tourStepIndex",e["authPreviewPath"]="authPreviewPath",e["elementUuid"]="elementUuid",e["thunkChain"]="thunkChain",e["tooltipKey"]="tooltipKey",e["tooltipOptions"]="tooltipOptions",e["isUnlimitedPlus"]="isUnlimitedPlus",e["isTrialDisabled"]="isTrialDisabled",e["arbiter"]="arbiter"}(o||(o={})),function(e){e["brandKit"]="brandKit",e["createTeam"]="createTeam",e["multiResize"]="multiResize",e["outline"]="outline",e["storage"]="storage"}(r||(r={}))},38763:function(e,t,n){n.d(t,{E$:function(){return a},xv:function(){return s},Ql:function(){return c},iP:function(){return d},p5:function(){return l}});var o=n(48814);function r(e,t){return Object.assign(Object.assign({},e),{ops:Object.assign(Object.assign({},e.ops),t)})}const i={chainList:[]};const a="chains/START_CHAIN";const s="chains/UPDATE_CHAIN";const c="chains/MULTI_UPDATE_CHAINS";const d="chains/STOP_CHAIN";const l=(e=i,t)=>{const{type:n,meta:l={}}=t;const{name:u,ops:p={}}=l;let{chainList:v}=e;switch(n){case a:v=e.chainList.concat([{name:u,ops:p}]);break;case s:v=e.chainList.map(e=>e.name!==u?e:r(e,p));break;case d:v=e.chainList.filter(e=>e.name!==u);break;case c:v=e.chainList.map(e=>l.names.includes(e.name)?r(e,p):e);break;default:v=e.chainList}return v=v.reduce((t,i,a)=>{var s;return(null===(s=i.ops.expectedActions)||void 0===s?void 0:s.includes(n))&&((t=t===e.chainList?Array.from(e.chainList):t)[a]=r(i,(0,o.x)())),t},v),v!==e.chainList?Object.assign(Object.assign({},e),{chainList:v}):e}},54222:function(e,t,n){n.d(t,{o:function(){return s}});var o=n(59312);var r=n(6573);var i=n(56564);var a=n(4423);const s=()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e((0,i.y)({source:r._J2.share})),yield e((0,a.P)())})},56564:function(e,t,n){n.d(t,{A:function(){return k},y:function(){return O}});var o=n(59312);var r=n(47815);var i=n(11036);var a=n(40601);var s=n(55375);var c=n(64196);var d=n(33921);var l=n(20005);var u=n(29539);var p=n(26951);var v=n(1302);var h=n(23772);var m=n(3681);var y=n(20347);var g=n(20638);var f=n(97754);var b=n(59556);var P=n(4715);var w=n(85910);var j=n(6573);var T=n(59725);var C=n(66970);const[,x]=m.qZ;const S=[C.s.brandKit,C.s.artBoard];const G=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(yield y.V.waitFor([m.XS]),C.C.includes(t().common.currentPage))return e(G())});const k=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{modal2:{popup:n},common:{currentPage:o,language:i},auth:{currentUser:{id:m,language:y}}}=t();if(!m)throw(0,P.n)("stepCombination: tryAuthorizeUser was interrupted");const g=[(0,c.pI)(),(0,u.w)(),(0,d.LK)(),(0,s.t5)(j.zGK.openSubscriptionRebillModal),(0,s.t5)(j.zGK.checkEmailVerificationRender),(0,w.f)(),(0,l.M)(),(0,p.SP)()];n&&g.push((0,r.qS)()),S.includes(o)&&g.push((0,v.p0)()),o===C.s.artBoard&&g.push((0,a.UI)({})),i!==y&&g.push((0,h.X1)(y)),g.forEach(e)});const O=(e={})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:{id:a}},common:{language:s,currentPage:c,userAgent:{isMobile:d}}}=n();if(a)return;if(C.C.includes(c))return yield Promise.race([t(G()),y.V.waitFor([`${T.w8}_${x}`])]),yield t(k()),void(null===f.m||void 0===f.m||f.m.replace((0,b.Uv)({language:n().auth.currentUser.language,search:window.location.search})));if(d)return null===f.m||void 0===f.m||f.m.push((0,g.B8)(window.location.pathname,s)),yield y.V.waitFor([m.XS]),t(O(e));const{popup:l=j.eeA.registration,shouldCloseOnOverlayClick:u=!0}=e,p=(0,o._T)(e,["popup","shouldCloseOnOverlayClick"]);t((0,r.DF)(l,Object.assign({shouldCloseOnOverlayClick:u},p))),yield y.V.waitFor([i.Ex,`${T.w8}_${x}`]),yield t(k())})},21564:function(e,t,n){n.d(t,{a:function(){return g}});var o=n(59312);var r=n(47815);var i=n(11036);var a=n(29539);var s=n(3681);var c=n(20347);var d=n(21356);var l=n(4715);var u=n(97754);var p=n(59556);var v=n(24316);var h=n(6573);var m=n(75494);var y=n(49659);const g=e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(yield t((0,y.w)()),!(0,d.Fe)(n().auth.subscription,e.isUnlimitedPlus))return;t((0,a.w)());const{backUrl:o,shouldOpenCheckOutPage:g,selectedPlan:f}=e;if(g?(o&&(v.Q.set(m.E9.backUrl,o,{isSession:!0}),window.history.replaceState({},"",o)),null===u.m||void 0===u.m||u.m.push((0,p.Zs)(n().common.language,{selectedPlan:f}))):t((0,r.DF)(h.eeA.subscriptionModal,e)),yield c.V.waitFor([i.Ex,s.XS]),(0,d.Fe)(n().auth.subscription,e.isUnlimitedPlus))throw(0,l.n)("stepCombination: tryPurchaseSubscription was interrupted")})},32707:function(e,t,n){n.d(t,{Y:function(){return l}});var o=n(59312);var r=n(47815);var i=n(11036);var a=n(19258);var s=n(20347);var c=n(4715);var d=n(6573);const l=(e,t)=>(n,l)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(l().unpaidItems.unpaidItems.length&&(yield n((0,r.DF)(d.eeA.invoiceModal,{project:e,downloadProcessType:t})),yield s.V.waitFor([i.Ex,a.I3.async.done.type]),l().unpaidItems.unpaidItems.length))throw(0,c.n)("stepCombination: tryPurchaseUnpaidItems was interrupted")})},49659:function(e,t,n){n.d(t,{w:function(){return d}});var o=n(59312);var r=n(64196);var i=n(20347);var a=n(3681);var s=n(59725);const[,c]=a.qZ;const d=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{auth:{subscriptionLoaded:n,subscriptionLoading:o}}=t();n||(o||e((0,r.pI)()),yield i.V.waitFor([`${s.$T}_${c}`]))})},4423:function(e,t,n){n.d(t,{P:function(){return m}});var o=n(59312);var r=n(33426);var i=n(40601);var a=n(20347);var s=n(19807);var c=n(3681);var d=n(55595);var l=n(86143);var u=n(4715);var p=n(6573);const[,v,h]=c.qZ;const m=({nextPageName:e}={})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(n().arbiter.isReady||(yield a.V.waitFor([s.Nu])),n().projectData.loading){if(yield a.V.waitFor([`${s.yn}_${v}`,`${s.yn}_${h}`]),n().projectData.error)throw(0,u.n)("stepCombination: trySyncProject was interrupted")}else{if((0,l.Qr)(n().projectData.project))throw(0,u.n)("stepCombination: trySyncProject was interrupted");try{yield t((0,i.W3)(!0))}catch(o){const{projectData:{error:i},artboard:{editingMode:a}}=n();const s=undefined;throw a===d.a.partnerTemplate&&(null==i?void 0:i.status)===p.jhL.badRequest&&t((0,r.g)(p.JFw.syncPartnerTemplateError,{nextPageName:e})),o}}})},70092:function(e,t,n){n.d(t,{y:function(){return a}});var o=n(59312);var r=n(26951);var i=n(20347);const a=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{loaded:n,loading:o}=t().userMetadata;n||(o||e((0,r.SP)()),yield i.V.waitFor([r.SP.async.done.type]))})},19444:function(e,t,n){n.d(t,{a:function(){return l}});var o=n(59312);var r=n(47815);var i=n(33426);var a=n(37620);var s=n(97403);var c=n(55375);var d=n(6573);const l=(0,c.aP)(d.zGK.addProjectsToTemplates,({projectIds:e=[],shouldCloneProjects:t=!1,shouldResetSelected:n})=>(c,l)=>(0,o.mG)(void 0,void 0,void 0,function*(){c((0,r.qS)()),yield c((0,a.nY)({projectIds:e})),n&&c((0,s.NQ)());const{partnerTemplates:{failedProjectIds:o,error:u}}=l();if(!t){if(u)return;const t=e.filter(e=>!o.includes(e));t.length&&c((0,s.Kr)(t))}const p=undefined;const v={projectIds:e,failedProjectIds:u?e:o,shouldCloneProjects:t,isError:!!u};o.length?c((0,i.g)(d.JFw.syncPartnerTemplateError)):c(u?(0,i.g)(d.JFw.addProjectsToTemplatesError,v):(0,i.g)(d.JFw.addProjectsToTemplatesSuccess,v))}))},21014:function(e,t,n){n.d(t,{F:function(){return s}});var o=n(59312);var r=n(55375);var i=n(10021);var a=n(6573);const s=(0,r.aP)(a.zGK.appsFlyerGenerator,()=>()=>(0,o.mG)(void 0,void 0,void 0,function*(){return(0,i.R)({src:`${CONFIG.mediaServer}/common/appsflyer-link-generator.min.js`})}))},83039:function(e,t,n){n.d(t,{E:function(){return u}});var o=n(59312);var r=n(64196);var i=n(75551);var a=n(55375);var s=n(14385);var c=n(6573);var d=n(75494);const l="/api/feedback";const u=(0,a.aP)(c.zGK.cancelSubscription,e=>{var t=e.feedback,{other:n}=t,a=(0,o._T)(t,["other"]),{shouldRemoveCard:c}=e;return(e,t,u)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{card:o}=t().paymentCard;if(u.post(l,{type:d.nY.subscriptionCancel,fields:Object.assign(Object.assign({},a),{other:(0,s.s2)(n)})}),c&&o)return e((0,i.yJ)(o));e((0,r.dh)())})})},33437:function(e,t,n){n.d(t,{S:function(){return c}});var o=n(59312);var r=n(40601);var i=n(55375);var a=n(13596);var s=n(6573);const c=(0,i.aP)(s.zGK.changeProjectName,({name:e,arbiter:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{projectData:{project:{name:o}}}=i();const s=e.trim();s&&s!==o&&(null==t||t.arbiter2.updateProject({name:s}),yield n((0,r.UI)({name:s})),yield n((0,a.P)()))}))},87944:function(e,t,n){n.d(t,{Q:function(){return u}});var o=n(59312);var r=n(55375);const i=e=>e.reduce((e,{size:t})=>e+t,0);var a=n(6573);var s=n(56564);var c=n(21564);var d=n(70092);var l=n(64564);const u=(0,r.aP)(a.zGK.checkUserSubscriptionBeforeUploading,({files:e})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,s.y)()),yield t((0,d.y)());const{userMetadata:{diskUsageInfo:{softLimit:o,used:r}}}=n();r+i(e)>=o&&(yield t((0,c.a)({isUnlimitedPlus:!0,popupType:l.B.storage})))}))},76412:function(e,t,n){n.d(t,{Q:function(){return d}});var o=n(59312);var r=n(47815);var i=n(65630);var a=n(55375);var s=n(6573);var c=n(87134);const d=(0,a.aP)(s.zGK.tryToCopyToClipboard,({arbiter:e,element:t})=>n=>(0,o.mG)(void 0,void 0,void 0,function*(){if(!navigator.clipboard)return void n((0,r.DF)(s.eeA.copyPasteClipboard));if(!e||!(0,i.LG)(t))return;const o={type:c.lI,element:t};navigator.clipboard.writeText(JSON.stringify(o))}))},95996:function(e,t,n){n.d(t,{V:function(){return d}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(51206);var s=n(6573);var c=n(87134);const d=(0,i.aP)(s.zGK.tryToPasteFromClipboard,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(navigator.clipboard){if(e)try{const t=yield navigator.clipboard.readText();if(!t)return;if(t.includes(c.lI)){const{element:n}=JSON.parse(t);return void e.pasteFromClipboard(n)}const{common:{language:o},projectData:{project:{pageWidth:r=0}}}=n();const i=(0,a.yE)({language:o,pageWidth:r,textData:t});e.addElement(i)}catch(e){t((0,r.DF)(s.eeA.copyPasteClipboard))}}else t((0,r.DF)(s.eeA.copyPasteClipboard))}))},60449:function(e,t,n){n.d(t,{L:function(){return l}});var o=n(59312);var r=n(47815);var i=n(33426);var a=n(79006);var s=n(97403);var c=n(55375);var d=n(6573);const l=(0,c.aP)(d.zGK.cloneProjectsToTeam,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){t((0,r.qS)()),yield t((0,a.I)(e));const{projectIds:o=[],shouldCloneProjects:c=!1,shouldResetSelected:l}=e;l&&t((0,s.NQ)());const{cloneProjectsToTeam:{failedProjectIds:u,error:p}}=n();if(!c){if(p)return;const e=o.filter(e=>!u.includes(e));e.length&&t((0,s.Kr)(e))}const v=undefined;const h={projectIds:o,failedProjectIds:p?o:u,shouldCloneProjects:c,isError:!!p};p||u.length?t((0,i.g)(d.JFw.cloneProjectsToTeamError,h)):t((0,i.g)(d.JFw.cloneProjectsToTeamSuccess,h))}))},92079:function(e,t,n){n.d(t,{h:function(){return r},B:function(){return i}});var o=n(38849);const r=[o.S.GB,o.S.US];const i={[o.S.US]:{param1:"1ktvevv",param2:"8q4rdd1"},[o.S.GB]:{param1:"kvvon87",param2:"z4addfe"}}},66054:function(e,t,n){n.d(t,{B:function(){return d}});var o=n(59312);var r=n(55375);var i=n(10021);var a=n(6573);var s=n(92079);var c=n(58632);const d=(0,r.aP)(a.zGK.deskPixels,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:{country:e,id:n}},common:{currentPage:o},partner:{currentPartner:r}}=t();if(r||!n&&c.ct.has(o)||!s.h.includes(e))return;yield(0,i.R)({src:"https://js.adsrvr.org/up_loader.1.1.0.js"});const{param1:a,param2:d}=s.B[e];ttd_dom_ready(()=>{if("function"==typeof TTDUniversalPixelApi){let e;(new TTDUniversalPixelApi).init(a,[d],"https://insight.adsrvr.org/track/up")}})}))},68597:function(e,t,n){n.d(t,{J:function(){return m}});var o=n(59312);var r=n(55375);var i=n(59194);var a=n(6573);var s=n(66970);var c=n(53188);var d=n(64196);var l=n(26539);var u=n(75513);var p=n(56564);const v=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:{id:e,isNew:n}}}=t();(0,l.J)({event:u.GM.oneTap,eventCategory:u.GM.oneTap,eventAction:n?u.DS.signUp:u.DS.signIn,eventLabel:e})});const h=(0,r.aP)(a.zGK.googleOneTapAuth,({credential:e})=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){try{yield t((0,d.$U)(a.TNy.google,{mailSubscription:!0,idToken:e})),yield t((0,p.A)()),t(v())}catch(e){(0,c.i)(e)&&t((0,r.t5)(a.zGK.authorizationUser,{onSuccess:()=>{t(v())}}))}}));const m=(0,r.aP)(a.zGK.googleOneTapInit,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{auth:{currentUser:n},common:{currentPage:o,userAgent:{isMobile:r}},partner:{currentPartner:a}}=t();r||a||n.id||[...s.C,s.s.share,s.s.partnerError].includes(o)||(0,i.Dp)(t=>e(h(t)))}))},250:function(e,t,n){n.d(t,{W:function(){return c}});var o=n(59312);var r=n(55375);var i=n(68841);var a=n(3867);var s=n(6573);const c=(0,r.aP)(s.zGK.openFavorites,e=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){t(t((0,i.v7)(e))),t((0,a.JW)({activeSidebarTab:s.GjI.favorites}))}))},74076:function(e,t,n){n.d(t,{u:function(){return u}});var o=n(59312);var r=n(55375);var i=n(55595);var a=n(97754);var s=n(59556);var c=n(6573);var d=n(4423);var l=n(66970);const u=(0,r.aP)(c.zGK.openMyProjects,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const n=t().artboard.editingMode===i.a.template;const o=t().artboard.editingMode===i.a.partnerTemplate;n||(yield e((0,d.P)({nextPageName:l.s.myProjects})));const{common:{language:r},team:{currentTeam:u}}=t();const p={activeFolderId:o?c.w8H:c.ZJt};null===a.m||void 0===a.m||a.m.push((0,s.jq)({currentTeam:u,language:r}),p)}))},3927:function(e,t,n){n.d(t,{Y:function(){return y}});var o=n(59312);var r=n(47815);var i=n(19258);var a=n(55375);var s=n(61787);var c=n(24316);var d=n(48604);var l=n(6573);var u=n(75494);var p=n(20576);function v(){const{popup:e,selectedPlan:t,mediaId:n,dphId:o,pagesRange:r,downloadProcessType:i,promoId:a,payMethod:v}=(0,d.d)(c.Q.get(u.E9.stateBeforeExternalBilling))||{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e&&e in l.eeA&&{popup:e}),t&&t in p.NY&&{selectedPlan:t}),n&&{mediaId:String(n)}),o&&{dphId:String(o)}),r&&{pagesRange:String(r)}),i&&i in l.$Ie&&{downloadProcessType:i}),a&&{promoId:String(a)}),v&&v in s.j&&{payMethod:v})}var h=n(14981);var m=n(85151);const y=(0,a.aP)(l.zGK.processExternalBillingResult,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const n=new URLSearchParams(window.location.search);const a=n.get("externalBilling");if(!a)return;const s=n.get("result")===h.s;const c=!s&&a===m.G["3ds"];const{project:d}=t().projectData;const u=v(),{popup:p}=u,y=(0,o._T)(u,["popup"]);switch(p){case l.eeA.subscriptionModal:if(!s){e((0,r.DF)(l.eeA.subscriptionModal,Object.assign(Object.assign({},y),{isExternalError:c})));break}e((0,r.DF)(l.eeA.subscriptionSuccessfulModal));break;case l.eeA.invoiceModal:s||(e((0,i.hp)(Object.assign(Object.assign({},y),{project:d}))),e((0,r.DF)(l.eeA.invoiceModal,{project:d,downloadProcessType:y.downloadProcessType,isExternalError:c})));break;case l.eeA.replaceCardModal:s||e((0,r.DF)(l.eeA.replaceCardModal,{isExternalError:c}))}}))},20327:function(e,t,n){n.d(t,{U:function(){return c}});var o=n(59312);var r=n(55375);var i=n(34602);var a=n(45507);var s=n(6573);const c=(0,r.aP)(s.zGK.handleFacebookManageAccounts,()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){return yield e((0,i.SX)()),new Promise(t=>{(0,a.NA)(({status:n,authResponse:r})=>(0,o.mG)(void 0,void 0,void 0,function*(){n===s.qRu.connected?yield e((0,i.IV)({accessToken:r.accessToken})):(e((0,i.kz)()),yield e((0,i.fe)())),t()}))})}))},42689:function(e,t,n){n.d(t,{E:function(){return c}});var o=n(59312);var r=n(55375);var i=n(31483);var a=n(45507);var s=n(6573);const c=(0,r.aP)(s.zGK.handleInstagramManageAccounts,()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){return yield e((0,i.Cz)()),new Promise(t=>{(0,a.$e)(({status:n,authResponse:r})=>(0,o.mG)(void 0,void 0,void 0,function*(){n===s.qRu.connected?yield e((0,i.S3)({accessToken:r.accessToken})):(e((0,i.jm)()),yield e((0,i.bH)())),t()}))})}))},15544:function(e,t,n){n.d(t,{D:function(){return c}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(80440);var s=n(6573);const c=(0,i.aP)(s.zGK.handleModalClose,({resetAction:e})=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){t((0,r.qS)()),t(e),t((0,a.pO)())}))},65929:function(e,t,n){n.d(t,{K:function(){return p}});var o=n(59312);var r=n(55375);var i=n(61911);var a=n(82998);var s=n(26539);var c=n(6573);const d=450,l=855;var u=n(7157);const p=(0,r.aP)(c.zGK.handlePinterestConnect,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e((0,i.UV)());const{oauthUrl:n}=t().pinterestPublishing;if(n)try{yield(0,a.f)({url:n,width:d,height:l}),(0,s.J)(u.zz)}catch(e){(0,s.J)(u.x6)}finally{yield e((0,i.g3)())}}))},36722:function(e,t,n){n.d(t,{h:function(){return c}});var o=n(59312);var r=n(55375);var i=n(61911);var a=n(6573);var s=n(65929);const c=(0,r.aP)(a.zGK.handlePinterestManageAccounts,()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e((0,i.Q5)()),yield e((0,s.K)())}))},82231:function(e,t,n){n.d(t,{T:function(){return y}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(34602);var s=n(80440);var c=n(6573);var d=n(54222);var l=n(26539);var u=n(18556);var p=n(70703);var v=n(22553);const h=undefined;const m={onEscOrOverlayClick:(0,i.aP)(c.zGK.handlePublishToFacebookEscOrOverlayClick,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{facebookPublishing:n,publishing:o}=t();const r=(0,p.g)(n,o);const i=v.T2[r];i&&(0,l.J)((0,u.Z)(i)),e((0,a.kz)()),e((0,s.pO)())}))()};const y=(0,i.aP)(c.zGK.openPublishToFacebookModal,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){e||(yield t((0,d.o)()));const o=e||n().projectData.project;t((0,a.kz)()),t((0,s.g9)()),t((0,r.DF)(c.eeA.publishToFacebook,Object.assign({project:o},m)))}))},78217:function(e,t,n){n.d(t,{Z:function(){return P}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(31483);var s=n(80440);var c=n(86143);var d=n(70874);var l=n(4715);var u=n(6573);var p=n(54222);var v=n(26539);var h=n(18556);var m=n(22234);var y=n(40590);const g=undefined;const f={onEscOrOverlayClick:(0,i.aP)(u.zGK.handlePublishToInstagramEscOrOverlayClick,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{instagramPublishing:n,publishing:o}=t();const r=(0,m.g)(n,o);const i=y.T2[r];i&&(0,v.J)((0,h.Z)(i)),e((0,a.jm)()),e((0,s.pO)())}))()};const b=[1];const P=(0,i.aP)(u.zGK.openPublishToInstagramModal,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){e||(yield t((0,p.o)()));const o=e||n().projectData.project;if(!(0,d.X)(o))throw(0,l.n)("chain: tryGenerateProjectPreview was interrupted");const i=(0,c.yy)(o);t((0,a.jm)()),t((0,s.g9)()),t((0,r.DF)(u.eeA.publishToInstagram,Object.assign(Object.assign({project:o},f),!i&&{selectedPages:b})))}))},85149:function(e,t,n){n.d(t,{v:function(){return P}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(61911);var s=n(80440);var c=n(86143);var d=n(70874);var l=n(4715);var u=n(6573);var p=n(54222);var v=n(26539);var h=n(18556);var m=n(68594);var y=n(9521);const g=undefined;const f={onEscOrOverlayClick:(0,i.aP)(u.zGK.handlePublishToPinterestEscOrOverlayClick,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{pinterestPublishing:n,publishing:o}=t();const r=(0,m.g)(n,o);const i=y.T2[r];i&&(0,v.J)((0,h.Z)(i)),e((0,a.c6)()),e((0,s.pO)())}))()};const b=[1];const P=(0,i.aP)(u.zGK.openPublishToPinterestModal,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){e||(yield t((0,p.o)()));const o=e||n().projectData.project;if(!(0,d.X)(o))throw(0,l.n)("chain: tryGenerateProjectPreview was interrupted");const i=(0,c.yy)(o);t((0,a.c6)()),t((0,s.g9)()),t((0,r.DF)(u.eeA.publishToPinterest,Object.assign(Object.assign({project:o},f),!i&&{selectedPages:b})))}))},98138:function(e,t,n){n.d(t,{R:function(){return G}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(80440);var s=n(26539);var c=n(86143);var d=n(93365);const l=e=>(0,c.yy)(e)?d.OU.mp4:d.OU.jpg;var u=n(6573);var p=n(3598);const v=2500;var h=n(52273);const m=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield(0,p._)(v);const{jobId:n}=t().publishing;if(!n)return;yield e((0,a.Ms)());const{status:o}=t().publishing;const r=undefined;o&&h.FQ.includes(o)||(yield e(m()))});var y=n(19258);var g=n(21356);var f=n(53792);var b=n(49659);var P=n(32707);var w=n(21564);const j=({project:e,onSuccessPayment:t})=>(n,r)=>(0,o.mG)(void 0,void 0,void 0,function*(){(0,f.hP)(e)&&(yield n((0,b.w)()),(0,g.Fe)(r().auth.subscription,!0)&&(yield n((0,w.a)({isUnlimitedPlus:!0})),null==t||t())),yield n((0,y.hp)({project:e})),r().unpaidItems.unpaidItems.length&&(yield n((0,P.Y)(e)),null==t||t())});var T=n(17484);var C=n(39396);var x=n(7157);const S={[d.I_.facebook]:T.JU,[d.I_.instagram]:C.JU,[d.I_.pinterest]:x.JU};const G=(0,i.aP)(u.zGK.publishProject,({social:e,publishingParams:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{popup:o,options:c,options:{project:d}}=i().modal2;yield n(j({project:d,onSuccessPayment:()=>{(0,s.J)(S[e])}})),n((0,r.DF)(o,Object.assign(Object.assign({},c),{reopened:!0}))),yield n((0,a.Js)(Object.assign(Object.assign({},t),{social:e,format:l(d)}))),yield n(m())}))},7204:function(e,t,n){n.d(t,{k:function(){return c}});var o=n(59312);var r=n(55375);var i=n(61911);var a=n(6573);var s=n(65929);const c=(0,r.aP)(a.zGK.tryLoadPinterestDestinations,()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){var t;try{yield e((0,i.iz)())}catch(n){(null===(t=n.context)||void 0===t?void 0:t.socialErrorCode)===a.jhL.unauthorized&&(yield e((0,i.Q5)()),e((0,s.K)()))}}))},21948:function(e,t,n){n.d(t,{K:function(){return c}});var o=n(59312);var r=n(55375);var i=n(6573);var a=n(56564);var s=n(21564);const c=(0,r.aP)(i.zGK.purchaseSubscription,e=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,a.y)()),yield t((0,s.a)(e))}))},47423:function(e,t,n){n.d(t,{C:function(){return a}});var o=n(59312);var r=n(86143);const i="/api/print-api/print-url";const a=e=>(t,n,a)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{modal2:{options:{project:{id:t,group:o,format:s,originalDimensions:c}}}}=n();const d=(0,r.Yq)(o,s);if(!c||!d||!(null==e?void 0:e.path))return;const{printUrl:l}=yield a.get(i,{projectId:t,format:d.key,width:c.width,height:c.height,fileUri:`${CONFIG.url}${e.path}`});l&&(window.location.href=l)})},86598:function(e,t,n){n.d(t,{a:function(){return h}});var o=n(59312);var r=n(47815);var i=n(13382);var a=n(55375);var s=n(81239);var c=n(24310);var d=n(48234);var l=n(23543);const u=({replacements:e},{pages:t})=>{const n=[];return null==t||t.forEach(e=>{(0,l.traversePage)(e,e=>{e.type===d.DesignElementType.ImageElement&&n.push(e)})}),e.filter(e=>n.find(t=>e.imageId===t.uuid))};var p=n(6573);var v=n(56564);const h=(0,a.aP)(p.zGK.replacePartnerImages,({arbiter:e,payload:t,project:n})=>a=>(0,o.mG)(void 0,void 0,void 0,function*(){const d=u(t,n);yield a((0,v.y)()),yield Promise.allSettled(d.map(t=>(0,o.mG)(void 0,void 0,void 0,function*(){var n;try{const o=yield(0,s.QL)(t.src);const{result:r}=yield a((0,i.LI)([o]));const d=(0,c.St)(p.PpC.uploads,r);d.length&&(e.arbiter2.tryOnTry(t.imageId,d[0]),null===(n=e.arbiter2)||void 0===n||n.tryOnFinish(t.imageId))}catch(e){a((0,r.DF)(p.eeA.uploadError))}})))}))},76507:function(e,t,n){n.d(t,{_:function(){return d}});var o=n(59312);var r=n(79034);var i=n(13382);var a=n(55375);var s=n(81239);var c=n(6573);const d=(0,a.aP)(c.zGK.saveEraseRestore,e=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){const{arbiter:n}=e;const{uuid:a}=n.selectedElement;const c=[{filename:`${a}${r.EraseRestoreMode.Erase}.png`,base64:n.arbiter2.eraseRestoreExport(a,r.EraseRestoreMode.Erase)},{filename:`${a}${r.EraseRestoreMode.Restore}.png`,base64:n.arbiter2.eraseRestoreExport(a,r.EraseRestoreMode.Restore)}];const d=yield Promise.all(c.filter(({base64:e})=>!!e).map(({filename:e,base64:t})=>(0,o.mG)(void 0,void 0,void 0,function*(){return new File([yield(0,s.vZ)(t)],e)})));const l=yield t((0,i.LI)(d,{isMask:!0}));if(Array.isArray(null==l?void 0:l.result)&&l.result.length>0){const e={};l.result.forEach(({mediaId:t,originalName:n})=>{n.endsWith(r.EraseRestoreMode.Erase)&&(e.eraseMaskMediaId=t),n.endsWith(r.EraseRestoreMode.Restore)&&(e.restoreMaskMediaId=t)}),n.arbiter2.updateElement(Object.assign({uuid:a},e))}}))},31742:function(e,t,n){n.d(t,{h:function(){return d}});var o=n(59312);var r=n(33426);var i=n(55375);var a=n(6573);var s=n(32218);const c="/api/user-templates";const d=(0,i.aP)(a.zGK.sendTemplatesForReview,e=>(t,n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){try{yield i.post(c,e),t((0,r.g)(a.JFw.userTemplateSubmitForReviewSuccess))}catch(e){switch(e.caption){case s.v.projectHasUploads:t((0,r.g)(a.JFw.buyoutTemplateSubmitForReviewUploadsError));break;case s.v.projectHasCustomFormat:t((0,r.g)(a.JFw.buyoutTemplateSubmitForReviewCustomFormatError));break;case s.v.projectHasUnlimitedPlusContent:t((0,r.g)(a.JFw.buyoutTemplateSubmitForReviewUnlimitedPlusError));break;case s.v.projectHasEditorialContent:t((0,r.g)(a.JFw.userTemplateEditorialError));break;default:t((0,r.g)(a.JFw.userTemplateSubmitForReviewError))}}}))},74872:function(e,t,n){n.d(t,{H:function(){return h}});var o=n(59312);var r=n(47815);var i=n(33426);var a=n(55375);var s=n(21356);var c=n(97754);var d=n(6573);var l=n(20576);var u=n(98605);var p=n(66970);var v=n(41710);const h=(0,a.aP)(d.zGK.showSubscriptionSuccessfully,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{common:{language:n},auth:{subscription:{type:o,status:a},currentUser:{id:h}},projectData:{project:{teamId:m}}}=t();if(h)switch(a){case l.Ch.active:{const t=undefined;if(!m&&(0,s.Bt)(o))return void(null===c.m||void 0===c.m||c.m.push(u.i[n].prefix+v.H.get(p.s.team)));e((0,r.DF)(d.eeA.subscriptionSuccessfulModal));break}case l.Ch.suspended:e((0,i.g)(d.JFw.canceledPlan)),e((0,r.qS)());break;default:e((0,r.DF)(d.eeA.subscriptionSuccessfulModal))}}))},85910:function(e,t,n){n.d(t,{f:function(){return T}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(26951);var s=n(14385);var c=n(61320);var d=n.n(c);var l=n(21356);var u=n(35437);var p=n(11350);const v=(e,t)=>d()(e.createdAt).isSameOrAfter(p.Pz)?u.i.segment4:t.isLifetimedeal?u.i.segment3:(0,l.BZ)(t)?u.i.segment1:e.id?u.i.segment2:null;var h=n(6573);var m=n(49659);var y=n(70092);var g=n(20347);var f=n(38763);const b=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){for(;t().chains.chainList.length>1;)yield g.V.waitFor([f.iP])});var P=n(11036);const w=()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){t().modal2.popup&&(yield g.V.waitFor([P.Ex]))});var j=n(66970);const T=(0,i.aP)(h.zGK.showWelcomeModal,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e(b()),yield e(w());const{auth:{currentUser:n},partner:{currentPartner:o},common:{currentPage:i,userAgent:{isMobile:c}}}=t();if(!n.id||c||(0,s.Ye)(o)||i===j.s.partnerError)return;if(yield e((0,y.y)()),t().userMetadata.isWelcomeModalShown)return;yield e((0,m.w)());const d=v(n,t().auth.subscription);e((0,a.C)()),d!==u.i.segment4?e((0,r.DF)(h.eeA.welcomeUpdateModal,{userSegment:d})):e((0,r.DF)(h.eeA.welcomeModal))}))},73349:function(e,t,n){n.d(t,{$:function(){return d}});var o=n(59312);var r=n(55375);var i=n(66777);var a=n(29539);var s=n(7945);var c=n(6573);const d=(0,r.aP)(c.zGK.tryActivatePromoCode,({promocode:e,onSuccessfulActivation:t})=>(n,r)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield n((0,i.V)(e));const[o]=r().promo.activeItems;yield n((0,a.w)({promoId:o.id})),yield n((0,s.$)());const{list:c}=r().subscriptionPlans;const d=c.find(e=>e.type===o.subscriptionType&&e.isAvailableToSwitch);t(d)}))},59992:function(e,t,n){n.d(t,{S:function(){return u}});var o=n(59312);var r=n(6123);var i=n(55375);var a=n(59556);var s=n(86143);var c=n(6573);var d=n(56564);var l=n(21564);const u=(0,i.aP)(c.zGK.tryDownloadAsset,({isFreeDownload:e,selectedPlan:t,authPreviewPath:n,isUnlimitedPlus:i})=>(u,p)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(p().creativeAssetsItem.isFreeDownload!==e&&u((0,r.SO)(e)),yield u((0,d.y)({authPreviewPath:n})),!e){const{creativeAssetsItem:{item:e},creativeAssets:{filters:n},common:{language:o},modal2:{popup:r},auth:{currentUser:d}}=p();const v=r===c.eeA.creativeAsset;const h=e?(0,a.C4)({language:o,item:e}):"";const m=v?(0,a.Np)({language:o,filters:n,assetItemUrl:h}):h;yield u((0,l.a)({selectedPlan:t,isUnlimitedPlus:i,shouldOpenCheckOutPage:(0,s.tw)(d,c.pRz.newCheckoutTester),backUrl:m}))}u((0,r.x4)())}))},51680:function(e,t,n){n.d(t,{C:function(){return h}});var o=n(59312);var r=n(40601);var i=n(55375);var a=n(20347);var s=n(19807);var c=n(3681);var d=n(4715);const l=e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(e&&n().modal2.popup!==e)throw(0,d.n)("chain: tryGenerateProjectPreview was interrupted")});var u=n(6573);const[p,v]=c.qZ;const h=(0,i.aP)(u.zGK.tryGenerateProjectPreview,({project:e,modalName:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){if(i().projectData.loading&&(yield a.V.waitFor([`${s.ZQ}_${v}`,`${s.ZQ}_${p}`])),i().projectData.error)throw(0,d.n)("chain: tryGenerateProjectPreview was interrupted");yield n((0,r.En)(e.id)),yield n(l(t))}))},43e3:function(e,t,n){n.d(t,{x:function(){return l}});var o=n(59312);var r=n(12966);var i=n(55375);var a=n(78090);var s=n(6573);var c=n(21564);var d=n(64564);const l=(0,i.aP)(s.zGK.tryMultiResize,({resizeUrls:e,tooltipTarget:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield n((0,c.a)({isUnlimitedPlus:!0,popupType:d.B.multiResize}));const{projectData:{project:o}}=i();a.T.save(s.dAu.projectToResizeStorageKey,o);const l=e.map(e=>window.open(e,"_blank"));const u=undefined;if(l.some(e=>!e))return l.map(e=>null==e?void 0:e.close()),void n((0,r.hJ)(s.rgO.allowPopUps,t));e.length&&n((0,r.i8)(s.rgO.multiResize))}))},34686:function(e,t,n){n.d(t,{K:function(){return O}});var o=n(59312);var r=n(47815);var i=n(26951);var a=n(3314);var s=n(64196);var c=n(19258);var d=n(55375);var l=n(86143);var u=n(21356);var p=n(13843);var v=n(74364);var h=n(53792);var m=n(70874);var y=n(10606);var g=n(24316);var f=n(6573);var b=n(56564);var P=n(4423);var w=n(21564);var j=n(32707);var T=n(75494);var C=n(18556);var x=n(26539);var S=n(48820);var G=n(75336);const k=(0,d.aP)(f.zGK.handleExplorePublishingEscOrOverlayClick,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{social:e}=t().modal2.options;if(!e)return;const{gtmSubcateg:n}=G.T[e];(0,x.J)((0,C.Z)(Object.assign(Object.assign({},S.N6),{subcateg:n})))}));const O=(0,d.aP)(f.zGK.tryOpenDownloadModal,({downloadProcessType:e,social:t})=>(n,d)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield n((0,b.y)({source:f._J2.download})),yield n((0,P.P)());const{projectData:{project:o}}=d();yield Promise.all([n((0,c.hp)({project:o})),n((0,a.y)()),n((0,i.SP)({downloadsCount:!0})),n((0,s.is)())]);const{singlePayment:{shouldPay:C},auth:{subscription:x,currentUser:S},userMetadata:{downloadProjectLimit:{used:G}},partner:{features:O}}=d();const I=undefined;if(G&&!(0,u.BZ)(x)&&(0,v.I)(S))return n((0,r.DF)(f.eeA.emailVerification));const R=(0,y.En)(y.Wz.dpAccountEnterprise,O,!1)||(0,l.tw)(S,f.pRz.watermarkTester);const A=(0,m.X)(o)&&(0,h.hP)(o);const K=undefined;(A||C&&!(0,p.$)(o.lastDownloadedAt||0))&&!R&&(yield n((0,w.a)({isUnlimitedPlus:A}))),(0,m.X)(o)&&(0,l.yy)(o)&&(yield n((0,j.Y)(o,e)));const E=undefined;t&&!g.Q.get(T.E9.dontShowExplorePublishing).split(",").includes(t)?n((0,r.DF)(f.eeA.explorePublishing,{project:o,downloadProcessType:e,social:t,onEscOrOverlayClick:k()})):n((0,r.DF)(f.eeA.downloadModal,{project:o,downloadProcessType:e}))}))},48547:function(e,t,n){n.d(t,{y:function(){return p}});var o=n(59312);var r=n(47815);var i=n(64196);var a=n(55375);var s=n(45507);var c=n(6573);var d=n(51680);const{ads_read:l,ads_management:u}=CONFIG.facebook.permissions;const p=(0,a.aP)(c.zGK.tryOpenFacebookAds,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{modal2:{options:{isPreviewGenerated:n,project:o}}}=t();(0,s.YT)(a=>{t().modal2.popup&&(e((0,i.lL)(a)),e(n?(0,r.EZ)({selectedServiceKey:c.So6.facebookAds}):(0,d.C)({project:o,modalName:c.eeA.shareModal,modalOptions:{project:o}},{onSuccess:()=>e((0,r.EZ)({selectedServiceKey:c.So6.facebookAds}))})))},[l,u].join(","))}))},62812:function(e,t,n){n.d(t,{t:function(){return d}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(30322);var s=n(6573);var c=n(56564);const d=(0,i.aP)(s.zGK.tryOpenLogoMakerModal,()=>e=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e((0,c.y)()),e((0,a.o)()),e((0,r.DF)(s.eeA.logoMakerModal,{shouldCloseOnOverlayClick:!1}))}))},18348:function(e,t,n){n.d(t,{q:function(){return d}});var o=n(59312);var r=n(47815);var i=n(55375);var a=n(6573);var s=n(56564);var c=n(4423);const d=(0,i.aP)(a.zGK.tryOpenPostToFacebookBusinessModal,()=>(e,t)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield e((0,s.y)({source:a._J2.share})),yield e((0,c.P)());const{project:n}=t().projectData;e((0,r.DF)(a.eeA.postToFacebookBusiness,{project:n}))}))},47489:function(e,t,n){n.d(t,{s:function(){return p}});var o=n(59312);var r=n(47815);var i=n(19258);var a=n(55375);var s=n(70874);var c=n(4715);var d=n(6573);var l=n(32707);var u=n(54222);const p=(0,a.aP)(d.zGK.tryOpenShareModal,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){e||(yield t((0,u.o)()));const o=e||n().projectData.project;if(!(0,s.X)(o))throw(0,c.n)("chain: tryOpenShareModal was interrupted");yield t((0,i.hp)({project:o})),yield t((0,l.Y)(o)),t((0,r.DF)(d.eeA.shareModal,{project:o}))}))},46981:function(e,t,n){n.d(t,{V:function(){return f}});var o=n(59312);var r=n(16025);var i=n(67243);var a=n(11429);var s=n(55375);var c=n(3867);var d=n(68327);var l=n(18930);var u=n(6573);var p=n(21564);var v=n(56564);var h=n(75494);const m="content-type";const y="image/jpeg";var g=n(64564);const f=(0,s.aP)(u.zGK.tryOutline,({arbiterAdapter:e,selectedElement:t})=>n=>(0,o.mG)(void 0,void 0,void 0,function*(){var o,f,b;yield n((0,v.y)()),yield n((0,p.a)({isUnlimitedPlus:!0,popupType:g.B.outline}));const P=null===(o=t.outlineParams)||void 0===o?void 0:o.enabled;const{mediaId:w,uuid:j,dphId:T}=t;if(!w)return;const C=(0,l.jj)({mediaId:w,mediaType:u.oZr.screen});const{headers:x}=yield fetch(C);const S=x.get(m);const G=(null===(b=null===(f=t)||void 0===f?void 0:f.psParams)||void 0===b?void 0:b.processingType)===h.pU.removeBg;if(S!==y||G)n((0,c.BX)(r.k.createOutline)),P||(0,i.B)({arbiter:e,selectedElement:t,updatedFields:a.ds});else{e&&e.setExternalLoader({uuid:j,showExternalLoader:!0});const o=()=>{e&&(n((0,d.nz)({arbiter:e,processingType:h.pU.removeBg})),e.setExternalLoader({uuid:j,showExternalLoader:!1}),P||(0,i.B)({arbiter:e,selectedElement:t,updatedFields:a.ds}),n((0,c.BX)(r.k.createOutline)))};const l=()=>{e&&n((0,d.iZ)({arbiter:e}))};yield n((0,s.t5)(u.zGK.toggleImageBackground,{onSuccess:o,onError:l,mediaId:w,dphId:T,elementUuid:j,arbiter:e}))}}))},71650:function(e,t,n){n.d(t,{a:function(){return l}});var o=n(59312);var r=n(94704);var i=n(24413);var a=n(55375);var s=n(4715);var c=n(86143);var d=n(6573);const l=(0,a.aP)(d.zGK.tryPostToAdsAccount,({project:e,adsAccountId:t})=>(n,a)=>(0,o.mG)(void 0,void 0,void 0,function*(){if((0,c.yy)(e)&&(yield n((0,i.xz)({format:d.$xx.mp4,ops:{downloadProcessType:d.$Ie.facebookAds,shared:!0}}))),yield n((0,r.dg)(`act_${t}`)),!a().modal2.popup)throw(0,s.n)("chain: tryPostToAdsAccount was interrupted")}))},84764:function(e,t,n){n.d(t,{n:function(){return v}});var o=n(59312);var r=n(19258);var i=n(55375);var a=n(12921);var s=n(53792);var c=n(70874);var d=n(4715);var l=n(6573);var u=n(32707);var p=n(21564);const v=(0,i.aP)(l.zGK.tryPostToFacebookBusiness,e=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{project:o}=n().projectData;if(!(0,c.X)(o))throw(0,d.n)("chain: tryPostToFacebookBusiness was interrupted");const i=(0,s.hP)(o);i&&(yield t((0,p.a)({isUnlimitedPlus:i}))),yield t((0,r.hp)({project:o})),yield t((0,u.Y)(o)),yield t((0,a.M4)(e))}))},96998:function(e,t,n){n.d(t,{t:function(){return p}});var o=n(59312);var r=n(55375);var i=n(29539);var a=n(59556);var s=n(97754);var c=n(65794);var d=n(6573);var l=n(56564);var u=n(49659);const p=(0,r.aP)(d.zGK.tryPurchaseSubscriptionPlan,({selectedPlan:e})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,l.y)()),yield t((0,u.w)()),yield t((0,i.w)());const{subscriptionPlans:{list:o},common:{language:r}}=n();const d=undefined;if(!!(0,c.M)(o,e))return void(null===s.m||void 0===s.m||s.m.push((0,a.Zs)(r,{selectedPlan:e})));const{auth:{subscription:{type:p}},team:{currentTeam:v}}=n();p||null===s.m||void 0===s.m||s.m.push((0,a.cd)({currentTeam:v,language:r}))}))},84172:function(e,t,n){n.d(t,{y:function(){return c}});var o=n(59312);var r=n(33426);var i=n(55375);var a=n(75551);var s=n(6573);const c=(0,i.aP)(s.zGK.tryRemoveCard,({card:e})=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){try{yield t((0,a.yJ)(e)),t((0,r.g)(s.JFw.cardRemoved))}catch(e){t((0,r.g)(s.JFw.removeCardError))}}))},72935:function(e,t,n){n.d(t,{f:function(){return v}});var o=n(59312);var r=n(61787);var i=n(55375);var a=n(75551);var s=n(80363);var c=n(74521);var d=n(4715);var l=n(92326);var u=n(6573);var p=n(20576);const v=(0,i.aP)(u.zGK.tryReplaceCard,({userData:e,cardData:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){var o;const{auth:{currentUser:u},subscriptionPlans:{list:v}}=i();yield n((0,a.LG)({cardData:t,userData:(0,c.jT)({userData:e,currentUser:u}),merchant:p.m_.adyen,currency:null===(o=v[0])||void 0===o?void 0:o.currency})),yield n((0,s.X)(null,r.j.card,p.m_.adyen));const{threeDsResponse:h}=i().paymentCard;if(null==h?void 0:h.form)throw(0,l.y)(h.form),(0,d.n)("tryReplaceCard: 3Ds redirect")}))},13596:function(e,t,n){n.d(t,{P:function(){return c}});var o=n(59312);var r=n(55375);var i=n(6573);var a=n(56564);var s=n(4423);const c=(0,r.aP)(i.zGK.saveProject,({popup:e}={})=>t=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,a.y)({popup:e,source:i._J2.save})),yield t((0,s.P)())}))},84875:function(e,t,n){n.d(t,{L:function(){return v}});var o=n(59312);var r=n(51023);var i=n(55375);var a=n(80363);var s=n(4715);var c=n(74521);var d=n(92326);var l=n(6573);var u=n(20576);var p=n(74872);const v=(0,i.aP)(l.zGK.trySubscribeWithCard,({currentPlan:e,userData:t,cardData:n,payMethod:i})=>(l,v)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield l((0,r.pz)({currentPlan:e,merchant:u.m_.adyen}));const{userSubscription:{initSubscription:o},auth:{currentUser:h}}=v();if(!o)throw(0,s.n)("chain: trySubscribeWithCard was interrupted");yield l((0,r.p0)({paymentInfo:(0,d.P)(o),userData:(0,c.jT)({userData:t,currentUser:h}),cardData:n})),yield l((0,a.X)(e,i,u.m_.adyen));const{threeDsResponse:m}=v().userSubscription;if(null==m?void 0:m.form)throw(0,d.y)(m.form),(0,s.n)("tryReplaceCard: 3Ds redirect");l((0,p.H)())}))},92326:function(e,t,n){n.d(t,{P:function(){return o},y:function(){return r}});const o=e=>{const{rebillAmount:t,firstChargeAmount:n,invoice:o,planId:r}=e;return{rebillAmount:t,firstChargeAmount:n,planId:r,merchant:o.merchant,planType:o.subscriptionType,invoiceIntegerId:o.integerId}};const r=e=>{const{method:t,url:n,data:o}=e;const r=document.createElement("form");r.style.display="none",r.method=t,r.action=n,r.target="_top",Object.entries(o).forEach(([e,t])=>{const n=document.createElement("input");n.type="hidden",n.name=e,n.value=t,r.appendChild(n)}),window.document.body.appendChild(r),r.submit()}},49650:function(e,t,n){n.d(t,{W:function(){return d}});var o=n(59312);var r=n(33426);var i=n(55375);var a=n(29746);var s=n(3598);var c=n(6573);const d=(0,i.aP)(c.zGK.tryToUpdateMailingPreference,({queryParams:e,settings:t})=>(n,i)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{common:{userAgent:{isMobile:o}},auth:{currentUser:d}}=i();const l=t.unsubscribedFromAll?c.JFw.mailingUnsibscribeFromAll:c.JFw.mailingUpdatePreference;yield n((0,a.gz)({queryParams:e,settings:t})),n((0,r.g)(l)),!o&&d.id||!t.unsubscribedFromAll||(yield(0,s._)(3e3),window.location.href="/")}))},84396:function(e,t,n){n.d(t,{k:function(){return m}});var o=n(59312);var r=n(47815);var i=n(13382);var a=n(60266);var s=n(11839);var c=n(55375);var d=n(30322);var l=n(3867);var u=n(4715);var p=n(24310);var v=n(6573);var h=n(54649);const m=(0,c.aP)(v.zGK.tryUploadLogoMakerItem,({logoId:e})=>(t,n,c)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,d.D)({logoId:e}));const{modal2:{popup:o},logoMaker:{logoItems:m}}=n();if(!o||!m)throw m&&c.delete(s._9,{ids:[m[h.i.logoPng].id,m[h.i.logoTransparentPng].id]}),(0,u.n)("chain: tryUploadLogoMakerItem was interrupted");const[y]=(0,p.St)(v.PpC.uploads,[m[h.i.logoTransparentPng]]);t((0,a.fb)(y)),t((0,i.n7)({skip:0,sort:v.FQS.byCreatedDesc})),t((0,l.JW)({activeSidebarTab:v.GjI.library})),t((0,r.qS)())}))},9042:function(e,t,n){n.d(t,{e:function(){return l}});var o=n(59312);var r=n(55375);var i=n(81465);var a=n(59556);var s=n(97754);var c=n(6573);var d=n(56564);const l=(0,r.aP)(c.zGK.tryUseProjectAsTemplate,({projectId:e})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){yield t((0,d.y)()),yield t((0,i.lP)(e));const{common:{language:o},team:{currentTeam:r},shareProject:{copiedProjectId:c}}=n();null===s.m||void 0===s.m||s.m.push((0,a.jq)({currentTeam:r,language:o,projectId:c}))}))},13433:function(e,t,n){n.d(t,{v:function(){return l}});var o=n(59312);var r=n(33426);var i=n(55375);var a=n(96852);var s=n(29539);var c=n(18414);var d=n(6573);const l=(0,i.aP)(d.zGK.tryValidateTaxNumber,({taxNumber:e})=>(t,n)=>(0,o.mG)(void 0,void 0,void 0,function*(){n().jwtTokens.billingToken||(yield t((0,c.l)())),yield t((0,a.Q)({taxNumber:e})),n().taxNumber.isValidTaxNumber&&(t((0,r.g)(d.JFw.vatValidated)),yield t((0,s.w)()))}))},30440:function(e,t,n){n.d(t,{R:function(){return h}});var o=n(59312);var r=n(37229);var i=n(12966);var a=n(55375);var s=n(40943);var c=n(18930);var d=n(26539);var l=n(75513);var u=n(45834);var p=n(6573);var v=n(56564);const h=(0,a.aP)(p.zGK.updateFavorite,({selectedElement:e,eventCategory:t})=>(n,a)=>(0,o.mG)(void 0,void 0,void 0,function*(){const{sidebar:{activeSidebarTab:o},favorites:h}=a();const{dphId:m,mediaId:y,previewPath:g}=e;const f=y||m||"";const b=h[f];const P=b?"favoritesRemove":"favoritesAdd";const w=(0,r.W)(e);const j=g||(0,c.jj)({mediaId:f,mediaType:p.oZr.thumb});(0,d.J)({event:l.GM.gaEv,eventCategory:t,eventAction:"favorites",eventLabel:P}),yield n((0,v.y)({authPreviewPath:j})),n((0,s.R3)({favoriteMediaId:f,isFavorite:!b,favoriteType:w})),b||o===p.GjI.favorites||n((0,i.hJ)(p.rgO.favoriteNotification,document.body,{item:Object.assign(Object.assign({},e),{previewPath:j}),isFavorite:!0,favoriteType:w})),(0,d.J)({event:l.GM.gaEv,eventCategory:P,eventAction:(0,u.X)(e),eventLabel:f})}))},4715:function(e,t,n){n.d(t,{n:function(){return r}});class o extends Error{constructor(e){super(e),Error.captureStackTrace(this,o)}}const r=e=>{const t=new o(e);return t.chainWasInterrupted=!0,t}},62189:function(e,t,n){n.d(t,{Ie:function(){return a},iN:function(){return s},$S:function(){return c},au:function(){return d}});var o=n(3867);var r=n(55375);var i=n(14385);const a=e=>(0,o.JW)({activeSidebarTab:e});const s=e=>t=>(0,r.Oh)(e,{tourStepIndex:t,processAction:!0});const c=e=>(t,n)=>({next:{categ:e,subcateg:"click",value:`step_${t}/${n}`},cancel:{categ:e,subcateg:"click",value:`step_${t}/Close`}});const d=e=>{var t,n;return null!==(n=null===(t=(0,i.Ny)(e))||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==n?n:new DOMRect}}}]);